<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Vowpal Wabbit: /__w/vowpal_wabbit/vowpal_wabbit/vowpalwabbit/lda_core.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vowpal Wabbit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="https://github.com/JohnLangford/vowpal_wabbit/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_23e69c20c74a4591a9cfc65aaff8f3d1.html">vowpalwabbit</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">lda_core.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="lda__core_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) by respective owners including Yahoo!, Microsoft, and</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// individual contributors. All rights reserved. Released under a BSD (revised)</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// license as described in the file LICENSE.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#pragma warning(disable : 4996)  // generated by inner_product use</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;numeric&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="correctedMath_8h.html">correctedMath.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vw__versions_8h.html">vw_versions.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vw_8h.html">vw.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mwt_8h.html">mwt.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="no__label_8h.html">no_label.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="gd_8h.html">gd.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rand48_8h.html">rand48.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="reductions_8h.html">reductions.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="array__parameters_8h.html">array_parameters.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vw__exception_8h.html">vw_exception.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;boost/version.hpp&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;boost/math/special_functions/digamma.hpp&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;boost/math/special_functions/gamma.hpp&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#if BOOST_VERSION &gt;= 105600</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;boost/align/is_aligned.hpp&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceVW_1_1config.html">VW::config</a>;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088">   38</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088">lda_math_mode</a></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492">   40</a></span>&#160;  <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492">USE_SIMD</a>,</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a218e5bceb2322cf88b9deba8d4a82695">   41</a></span>&#160;  <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a218e5bceb2322cf88b9deba8d4a82695">USE_PRECISE</a>,</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a34bd64a6fd3602062b05d743ac770270">   42</a></span>&#160;  <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a34bd64a6fd3602062b05d743ac770270">USE_FAST_APPROX</a></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;};</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classindex__feature.html">   45</a></span>&#160;<span class="keyword">class </span><a class="code" href="classindex__feature.html">index_feature</a></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classindex__feature.html#a8999c4919629820e83af036e724cb519">   48</a></span>&#160;  uint32_t <a class="code" href="classindex__feature.html#a8999c4919629820e83af036e724cb519">document</a>;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classindex__feature.html#ae794cb76a8e0a2867b76032307ecfec6">   49</a></span>&#160;  <a class="code" href="structfeature.html">feature</a> <a class="code" href="classindex__feature.html#ae794cb76a8e0a2867b76032307ecfec6">f</a>;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classindex__feature.html#a43948d814e4512f5ccf64b1272808d6c">   50</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classindex__feature.html#a43948d814e4512f5ccf64b1272808d6c">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="classindex__feature.html">index_feature</a> b)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> f.<a class="code" href="structfeature.html#a0a02b4c4c785a3ee3f8f1503ef7e4616">weight_index</a> &lt; b.<a class="code" href="classindex__feature.html#ae794cb76a8e0a2867b76032307ecfec6">f</a>.<a class="code" href="structfeature.html#a0a02b4c4c785a3ee3f8f1503ef7e4616">weight_index</a>; }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;};</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="structlda.html">   53</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structlda.html">lda</a></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">   55</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>;</div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="structlda.html#a3a96e670640968e073731102bf224ff3">   56</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="structlda.html#a3a96e670640968e073731102bf224ff3">lda_alpha</a>;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="structlda.html#ab9ff4429e8d145b8068a04dc8c61f572">   57</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="structlda.html#ab9ff4429e8d145b8068a04dc8c61f572">lda_rho</a>;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="structlda.html#a63e56d9031626e4d0e3871869a975fd9">   58</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="structlda.html#a63e56d9031626e4d0e3871869a975fd9">lda_D</a>;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="structlda.html#a526d03cdba0f11c46aa429211c5b9c8a">   59</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="structlda.html#a526d03cdba0f11c46aa429211c5b9c8a">lda_epsilon</a>;</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structlda.html#abf4130f3c19476d235616369349a7a03">   60</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structlda.html#abf4130f3c19476d235616369349a7a03">minibatch</a>;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="structlda.html#ae28c7b718acaf201dbf738b5055db9f5">   61</a></span>&#160;  <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088">lda_math_mode</a> <a class="code" href="structlda.html#ae28c7b718acaf201dbf738b5055db9f5">mmode</a>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="structlda.html#af86142c45e95f4c4979e8e5e62aefaf4">   63</a></span>&#160;  <a class="code" href="structv__array.html">v_array&lt;float&gt;</a> <a class="code" href="structlda.html#af86142c45e95f4c4979e8e5e62aefaf4">Elogtheta</a>;</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="structlda.html#a040db4ac52102609348b008125b76784">   64</a></span>&#160;  <a class="code" href="structv__array.html">v_array&lt;float&gt;</a> <a class="code" href="structlda.html#a040db4ac52102609348b008125b76784">decay_levels</a>;</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="structlda.html#a01778886ae22ac1468ffd88942981c4b">   65</a></span>&#160;  <a class="code" href="structv__array.html">v_array&lt;float&gt;</a> <a class="code" href="structlda.html#a01778886ae22ac1468ffd88942981c4b">total_new</a>;</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">   66</a></span>&#160;  <a class="code" href="structv__array.html">v_array&lt;example *&gt;</a> <a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>;</div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="structlda.html#acbad9c7bed9b39d6232edf989e2568d1">   67</a></span>&#160;  <a class="code" href="structv__array.html">v_array&lt;float&gt;</a> <a class="code" href="structlda.html#acbad9c7bed9b39d6232edf989e2568d1">total_lambda</a>;</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="structlda.html#ac39ef81ca4320c193b2417226691c77d">   68</a></span>&#160;  <a class="code" href="structv__array.html">v_array&lt;int&gt;</a> <a class="code" href="structlda.html#ac39ef81ca4320c193b2417226691c77d">doc_lengths</a>;</div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="structlda.html#a8be33866789db85fb0da45a64a30433e">   69</a></span>&#160;  <a class="code" href="structv__array.html">v_array&lt;float&gt;</a> <a class="code" href="structlda.html#a8be33866789db85fb0da45a64a30433e">digammas</a>;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="structlda.html#ae912b131d324029d50cfdb4d1a7b9956">   70</a></span>&#160;  <a class="code" href="structv__array.html">v_array&lt;float&gt;</a> <a class="code" href="structlda.html#ae912b131d324029d50cfdb4d1a7b9956">v</a>;</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="structlda.html#a544e43df89959594ca610605c89f4561">   71</a></span>&#160;  std::vector&lt;index_feature&gt; <a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="structlda.html#a16e668b407eaa62a2ca83bb03efb0dc3">   73</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structlda.html#a16e668b407eaa62a2ca83bb03efb0dc3">compute_coherence_metrics</a>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// size by 1 &lt;&lt; bits</span></div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structlda.html#a65f43d081b827480376c1578d70b2790">   76</a></span>&#160;  std::vector&lt;uint32_t&gt; <a class="code" href="structlda.html#a65f43d081b827480376c1578d70b2790">feature_counts</a>;</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structlda.html#ac56acba6976cb3d26e9ecff8f9076ef9">   77</a></span>&#160;  std::vector&lt;std::vector&lt;size_t&gt;&gt; <a class="code" href="structlda.html#ac56acba6976cb3d26e9ecff8f9076ef9">feature_to_example_map</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="structlda.html#a88860d8883cc504428feca3c9e86dc2d">   79</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structlda.html#a88860d8883cc504428feca3c9e86dc2d">total_lambda_init</a>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="structlda.html#ad0ed0ebccaf968c83a290c2e23175c7e">   81</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structlda.html#ad0ed0ebccaf968c83a290c2e23175c7e">example_t</a>;</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">   82</a></span>&#160;  <a class="code" href="structvw.html">vw</a> *<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>;  <span class="comment">// regressor, lda</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structlda.html#a4336b4aa2367d0466aefda0ad4205032">   84</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">float</span> underflow_threshold = 1.0e-10<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#ae6499831521aca90f0dc879c84257d91">digamma</a>(<span class="keywordtype">float</span> x);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#ae78e93f0fddc20ccf041cde4135c6797">lgamma</a>(<span class="keywordtype">float</span> x);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a3334ba50925c47fb99d4ae6e37f786c9">powf</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> p);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceldamath.html#abcc73ee6f2731b8d66dca96a6bea164c">expdigammify</a>(<a class="code" href="structvw.html">vw</a> &amp;all, <span class="keywordtype">float</span> *gamma);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceldamath.html#a733cd0773e8c0725e3573bdab9d9dadd">expdigammify_2</a>(<a class="code" href="structvw.html">vw</a> &amp;all, <span class="keywordtype">float</span> *gamma, <span class="keywordtype">float</span> *norm);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="structlda.html#ad6b9c1322926937e7550646ec34869c2">   91</a></span>&#160;  <a class="code" href="structlda.html#ad6b9c1322926937e7550646ec34869c2">~lda</a>()</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    Elogtheta.<a class="code" href="structv__array.html#a81c7c9af1948bd97850eb06785f2254f">delete_v</a>();</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    decay_levels.<a class="code" href="structv__array.html#a81c7c9af1948bd97850eb06785f2254f">delete_v</a>();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    total_new.<a class="code" href="structv__array.html#a81c7c9af1948bd97850eb06785f2254f">delete_v</a>();</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    examples.<a class="code" href="structv__array.html#a81c7c9af1948bd97850eb06785f2254f">delete_v</a>();</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    total_lambda.<a class="code" href="structv__array.html#a81c7c9af1948bd97850eb06785f2254f">delete_v</a>();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    doc_lengths.<a class="code" href="structv__array.html#a81c7c9af1948bd97850eb06785f2254f">delete_v</a>();</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    digammas.<a class="code" href="structv__array.html#a81c7c9af1948bd97850eb06785f2254f">delete_v</a>();</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    v.<a class="code" href="structv__array.html#a81c7c9af1948bd97850eb06785f2254f">delete_v</a>();</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;};</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">// #define VW_NO_INLINE_SIMD</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02lda__core_8cc_03.html">  106</a></span>&#160;<span class="keyword">namespace</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ac0aa65d0b3f9d90105048519869fd79c">  108</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ac0aa65d0b3f9d90105048519869fd79c">is_aligned16</a>(<span class="keywordtype">void</span> *ptr)</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#if BOOST_VERSION &gt;= 105600</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">return</span> boost::alignment::is_aligned(16, ptr);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">return</span> ((reinterpret_cast&lt;uintptr_t&gt;(ptr) &amp; 0x0f) == 0);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}  <span class="comment">// namespace</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="namespaceldamath.html">  118</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceldamath.html">ldamath</a></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a9b52d8c7b67495e6c4cb51a25b5144b2">  120</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a9b52d8c7b67495e6c4cb51a25b5144b2">fastlog2</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;{</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  uint32_t mx;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  memcpy(&amp;mx, &amp;x, <span class="keyword">sizeof</span>(uint32_t));</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  mx = (mx &amp; 0x007FFFFF) | (0x7e &lt;&lt; 23);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordtype">float</span> mx_f;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  memcpy(&amp;mx_f, &amp;mx, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  uint32_t vx;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  memcpy(&amp;vx, &amp;x, <span class="keyword">sizeof</span>(uint32_t));</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordtype">float</span> y = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(vx);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  y *= 1.0f / (float)(1 &lt;&lt; 23);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">return</span> y - 124.22544637f - 1.498030302f * mx_f - 1.72587999f / (0.3520887068f + mx_f);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a5fcbcdf394a2705c2c39d514f4b695d7">  138</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a5fcbcdf394a2705c2c39d514f4b695d7">fastlog</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> 0.69314718f * <a class="code" href="namespaceldamath.html#a9b52d8c7b67495e6c4cb51a25b5144b2">fastlog2</a>(x); }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="namespaceldamath.html#ae8337896a39cca5e66eb9ab03acd1181">  140</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="nn_8cc.html#aa2fc1eddf336e7821a5931054c23567c">fastpow2</a>(<span class="keywordtype">float</span> p)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordtype">float</span> offset = (p &lt; 0) * 1.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordtype">float</span> clipp = (p &lt; -126.0) ? -126.0f : p;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordtype">int</span> w = (int)clipp;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordtype">float</span> z = clipp - w + offset;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  uint32_t approx = (uint32_t)((1 &lt;&lt; 23) * (clipp + 121.2740838f + 27.7280233f / (4.84252568f - z) - 1.49012907<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> * z));</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordtype">float</span> v;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  memcpy(&amp;v, &amp;approx, <span class="keyword">sizeof</span>(uint32_t));</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">return</span> v;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a1db8305cb617c1524838ca9e622a0064">  153</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="nn_8cc.html#a98f828fae7db78aa840c2e929da77daf">fastexp</a>(<span class="keywordtype">float</span> p) { <span class="keywordflow">return</span> <a class="code" href="nn_8cc.html#aa2fc1eddf336e7821a5931054c23567c">fastpow2</a>(1.442695040<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> * p); }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a7144c84a42e3fd2894f751008c4e8fcf">  155</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a7144c84a42e3fd2894f751008c4e8fcf">fastpow</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> p) { <span class="keywordflow">return</span> <a class="code" href="nn_8cc.html#aa2fc1eddf336e7821a5931054c23567c">fastpow2</a>(p * <a class="code" href="namespaceldamath.html#a9b52d8c7b67495e6c4cb51a25b5144b2">fastlog2</a>(x)); }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a9fe0220b67d6189f202bcd955946faca">  157</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a9fe0220b67d6189f202bcd955946faca">fastlgamma</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordtype">float</span> logterm = <a class="code" href="namespaceldamath.html#a5fcbcdf394a2705c2c39d514f4b695d7">fastlog</a>(x * (1.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> + x) * (2.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> + x));</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordtype">float</span> xp3 = 3.0f + x;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span> -2.081061466f - x + 0.0833333f / xp3 - logterm + (2.5f + x) * <a class="code" href="namespaceldamath.html#a5fcbcdf394a2705c2c39d514f4b695d7">fastlog</a>(xp3);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a5d76fa789ecc3c9eb7ee63a2c133851b">  165</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a5d76fa789ecc3c9eb7ee63a2c133851b">fastdigamma</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordtype">float</span> twopx = 2.0f + x;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">float</span> logterm = <a class="code" href="namespaceldamath.html#a5fcbcdf394a2705c2c39d514f4b695d7">fastlog</a>(twopx);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">return</span> -(1.0f + 2.0f * x) / (x * (1.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> + x)) - (13.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> + 6.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> * x) / (12.0f * twopx * twopx) + logterm;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#if !defined(VW_NO_INLINE_SIMD)</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#if defined(__SSE2__) || defined(__SSE3__) || defined(__SSE4_1__)</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">// Include headers for the various SSE versions:</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#if defined(__SSE2__)</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">#include &lt;emmintrin.h&gt;</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#if defined(__SSE3__)</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#include &lt;tmmintrin.h&gt;</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#if defined(__SSE4_1__)</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#include &lt;smmintrin.h&gt;</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#define HAVE_SIMD_MATHMODE</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="keyword">typedef</span> __m128 v4sf;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keyword">typedef</span> __m128i v4si;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keyword">inline</span> v4sf v4si_to_v4sf(v4si x) { <span class="keywordflow">return</span> _mm_cvtepi32_ps(x); }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keyword">inline</span> v4si v4sf_to_v4si(v4sf x) { <span class="keywordflow">return</span> _mm_cvttps_epi32(x); }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">// Extract v[idx]</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keyword">template</span> &lt;const <span class="keywordtype">int</span> <span class="keywordtype">id</span>x&gt;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keywordtype">float</span> v4sf_index(<span class="keyword">const</span> v4sf x)</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">#if defined(__SSE4_1__)</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">float</span> ret;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  uint32_t val;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  val = _mm_extract_ps(x, idx);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// Portably convert uint32_t bit pattern to float. Optimizers will generally</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// make this disappear.</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  memcpy(&amp;ret, &amp;val, <span class="keyword">sizeof</span>(uint32_t));</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">return</span> _mm_cvtss_f32(_mm_shuffle_ps(x, x, _MM_SHUFFLE(idx, idx, idx, idx)));</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">// Specialization for the 0&#39;th element</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="keywordtype">float</span> v4sf_index&lt;0&gt;(<span class="keyword">const</span> v4sf x)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">return</span> _mm_cvtss_f32(x);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="keyword">inline</span> v4sf v4sfl(<span class="keyword">const</span> <span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> _mm_set1_ps(x); }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="keyword">inline</span> v4si v4sil(<span class="keyword">const</span> uint32_t x) { <span class="keywordflow">return</span> _mm_set1_epi32(x); }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="keyword">inline</span> __m128 operator+(<span class="keyword">const</span> __m128 <a class="code" href="rand48_8cc.html#a591b56c87cb459191199d0ed6e4f5b9b">a</a>, <span class="keyword">const</span> __m128 b) { <span class="keywordflow">return</span> _mm_add_ps(a, b); }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keyword">inline</span> __m128 operator-(<span class="keyword">const</span> __m128 a, <span class="keyword">const</span> __m128 b) { <span class="keywordflow">return</span> _mm_sub_ps(a, b); }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="keyword">inline</span> __m128 operator*(<span class="keyword">const</span> __m128 a, <span class="keyword">const</span> __m128 b) { <span class="keywordflow">return</span> _mm_mul_ps(a, b); }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="keyword">inline</span> __m128 operator/(<span class="keyword">const</span> __m128 a, <span class="keyword">const</span> __m128 b) { <span class="keywordflow">return</span> _mm_div_ps(a, b); }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="keyword">inline</span> v4sf vfastpow2(<span class="keyword">const</span> v4sf p)</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  v4sf ltzero = _mm_cmplt_ps(p, v4sfl(0.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>));</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  v4sf offset = _mm_and_ps(ltzero, v4sfl(1.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>));</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  v4sf lt126 = _mm_cmplt_ps(p, v4sfl(-126.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>));</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  v4sf clipp = _mm_andnot_ps(lt126, p) + _mm_and_ps(lt126, v4sfl(-126.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>));</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  v4si w = v4sf_to_v4si(clipp);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  v4sf z = clipp - v4si_to_v4sf(w) + offset;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keyword">const</span> v4sf c_121_2740838 = v4sfl(121.2740838<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keyword">const</span> v4sf c_27_7280233 = v4sfl(27.7280233<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keyword">const</span> v4sf c_4_84252568 = v4sfl(4.84252568<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keyword">const</span> v4sf c_1_49012907 = v4sfl(1.49012907<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  v4sf v = v4sfl(1 &lt;&lt; 23) * (clipp + c_121_2740838 + c_27_7280233 / (c_4_84252568 - z) - c_1_49012907 * z);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">return</span> _mm_castsi128_ps(v4sf_to_v4si(v));</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="keyword">inline</span> v4sf vfastexp(<span class="keyword">const</span> v4sf p)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keyword">const</span> v4sf c_invlog_2 = v4sfl(1.442695040<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">return</span> vfastpow2(c_invlog_2 * p);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="keyword">inline</span> v4sf vfastlog2(v4sf x)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;{</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  v4si vx_i = _mm_castps_si128(x);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  v4sf mx_f = _mm_castsi128_ps(_mm_or_si128(_mm_and_si128(vx_i, v4sil(0x007FFFFF)), v4sil(0x3f000000)));</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  v4sf y = v4si_to_v4sf(vx_i) * v4sfl(1.1920928955078125e-7<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keyword">const</span> v4sf c_124_22551499 = v4sfl(124.22551499<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keyword">const</span> v4sf c_1_498030302 = v4sfl(1.498030302<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keyword">const</span> v4sf c_1_725877999 = v4sfl(1.72587999<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keyword">const</span> v4sf c_0_3520087068 = v4sfl(0.3520887068<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">return</span> y - c_124_22551499 - c_1_498030302 * mx_f - c_1_725877999 / (c_0_3520087068 + mx_f);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="keyword">inline</span> v4sf vfastlog(v4sf x)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;{</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keyword">const</span> v4sf c_0_69314718 = v4sfl(0.69314718<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">return</span> c_0_69314718 * vfastlog2(x);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="keyword">inline</span> v4sf vfastdigamma(v4sf x)</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;{</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  v4sf twopx = v4sfl(2.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>) + x;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  v4sf logterm = vfastlog(twopx);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">return</span> (v4sfl(-48.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>) + x * (v4sfl(-157.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>) + x * (v4sfl(-127.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>) - v4sfl(30.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>) * x))) /</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      (v4sfl(12.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>) * x * (v4sfl(1.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>) + x) * twopx * twopx) +</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      logterm;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="keywordtype">void</span> vexpdigammify(<a class="code" href="structvw.html">vw</a> &amp;all, <span class="keywordtype">float</span> *gamma, <span class="keyword">const</span> <span class="keywordtype">float</span> underflow_threshold)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordtype">float</span> extra_sum = 0.0f;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  v4sf sum = v4sfl(0.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordtype">float</span> *fp;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> *fpend = gamma + all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// Iterate through the initial part of the array that isn&#39;t 128-bit SIMD</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="comment">// aligned.</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">for</span> (fp = gamma; fp &lt; fpend &amp;&amp; !<a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ac0aa65d0b3f9d90105048519869fd79c">is_aligned16</a>(fp); ++fp)</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    extra_sum += *fp;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    *fp = <a class="code" href="namespaceldamath.html#a5d76fa789ecc3c9eb7ee63a2c133851b">fastdigamma</a>(*fp);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// Rip through the aligned portion...</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ac0aa65d0b3f9d90105048519869fd79c">is_aligned16</a>(fp) &amp;&amp; fp + 4 &lt; fpend; fp += 4)</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    v4sf arg = _mm_load_ps(fp);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    sum = sum + arg;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    arg = vfastdigamma(arg);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    _mm_store_ps(fp, arg);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">for</span> (; fp &lt; fpend; ++fp)</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    extra_sum += *fp;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    *fp = <a class="code" href="namespaceldamath.html#a5d76fa789ecc3c9eb7ee63a2c133851b">fastdigamma</a>(*fp);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#if defined(__SSE3__) || defined(__SSE4_1__)</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// Do two horizontal adds on sum, extract the total from the 0 element:</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  sum = _mm_hadd_ps(sum, sum);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  sum = _mm_hadd_ps(sum, sum);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  extra_sum += v4sf_index&lt;0&gt;(sum);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  extra_sum += v4sf_index&lt;0&gt;(sum) + v4sf_index&lt;1&gt;(sum) + v4sf_index&lt;2&gt;(sum) + v4sf_index&lt;3&gt;(sum);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  extra_sum = <a class="code" href="namespaceldamath.html#a5d76fa789ecc3c9eb7ee63a2c133851b">fastdigamma</a>(extra_sum);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  sum = v4sfl(extra_sum);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">for</span> (fp = gamma; fp &lt; fpend &amp;&amp; !<a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ac0aa65d0b3f9d90105048519869fd79c">is_aligned16</a>(fp); ++fp)</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    *fp = fmax(underflow_threshold, <a class="code" href="nn_8cc.html#a98f828fae7db78aa840c2e929da77daf">fastexp</a>(*fp - extra_sum));</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ac0aa65d0b3f9d90105048519869fd79c">is_aligned16</a>(fp) &amp;&amp; fp + 4 &lt; fpend; fp += 4)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    v4sf arg = _mm_load_ps(fp);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    arg = arg - sum;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    arg = vfastexp(arg);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    arg = _mm_max_ps(v4sfl(underflow_threshold), arg);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    _mm_store_ps(fp, arg);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">for</span> (; fp &lt; fpend; ++fp)</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    *fp = fmax(underflow_threshold, <a class="code" href="nn_8cc.html#a98f828fae7db78aa840c2e929da77daf">fastexp</a>(*fp - extra_sum));</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="keywordtype">void</span> vexpdigammify_2(<a class="code" href="structvw.html">vw</a> &amp;all, <span class="keywordtype">float</span> *gamma, <span class="keyword">const</span> <span class="keywordtype">float</span> *norm, <span class="keyword">const</span> <span class="keywordtype">float</span> underflow_threshold)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;{</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordtype">float</span> *fp = gamma;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> *np;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> *fpend = gamma + all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">for</span> (np = norm; fp &lt; fpend &amp;&amp; !<a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ac0aa65d0b3f9d90105048519869fd79c">is_aligned16</a>(fp); ++fp, ++np)</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    *fp = fmax(underflow_threshold, <a class="code" href="nn_8cc.html#a98f828fae7db78aa840c2e929da77daf">fastexp</a>(<a class="code" href="namespaceldamath.html#a5d76fa789ecc3c9eb7ee63a2c133851b">fastdigamma</a>(*fp) - *np));</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ac0aa65d0b3f9d90105048519869fd79c">is_aligned16</a>(fp) &amp;&amp; fp + 4 &lt; fpend; fp += 4, np += 4)</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    v4sf arg = _mm_load_ps(fp);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    arg = vfastdigamma(arg);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    v4sf vnorm = _mm_loadu_ps(np);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    arg = arg - vnorm;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    arg = vfastexp(arg);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    arg = _mm_max_ps(v4sfl(underflow_threshold), arg);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    _mm_store_ps(fp, arg);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordflow">for</span> (; fp &lt; fpend; ++fp, ++np) *fp = fmax(underflow_threshold, <a class="code" href="nn_8cc.html#a98f828fae7db78aa840c2e929da77daf">fastexp</a>(<a class="code" href="namespaceldamath.html#a5d76fa789ecc3c9eb7ee63a2c133851b">fastdigamma</a>(*fp) - *np));</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">// PLACEHOLDER for future ARM NEON code</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">// Also remember to define HAVE_SIMD_MATHMODE</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">#endif  // !VW_NO_INLINE_SIMD</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">// Templates for common code shared between the three math modes (SIMD, fast approximations</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">// and accurate).</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">// The generic template takes a type and a specialization flag, mtype.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">// mtype == USE_PRECISE: Use the accurate computation for lgamma, digamma.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">// mtype == USE_FAST_APPROX: Use the fast approximations for lgamma, digamma.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// mtype == USE_SIMD: Use CPU SIMD instruction</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">// The generic template is specialized for the particular accuracy setting.</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">// Log gamma:</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, const lda_math_mode mtype&gt;</div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="namespaceldamath.html#ae78e93f0fddc20ccf041cde4135c6797">  400</a></span>&#160;<span class="keyword">inline</span> T <a class="code" href="namespaceldamath.html#ae78e93f0fddc20ccf041cde4135c6797">lgamma</a>(T <span class="comment">/* x */</span>)</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  BOOST_STATIC_ASSERT_MSG(<span class="keyword">true</span>, <span class="stringliteral">&quot;ldamath::lgamma is not defined for this type and math mode.&quot;</span>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">// Digamma:</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, const lda_math_mode mtype&gt;</div><div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="namespaceldamath.html#ae6499831521aca90f0dc879c84257d91">  407</a></span>&#160;<span class="keyword">inline</span> T <a class="code" href="namespaceldamath.html#ae6499831521aca90f0dc879c84257d91">digamma</a>(T <span class="comment">/* x */</span>)</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;{</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  BOOST_STATIC_ASSERT_MSG(<span class="keyword">true</span>, <span class="stringliteral">&quot;ldamath::digamma is not defined for this type and math mode.&quot;</span>);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;}</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">// Exponential</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, lda_math_mode mtype&gt;</div><div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a1ffa1f92dba7f9bcce42ceba5b82e1f0">  414</a></span>&#160;<span class="keyword">inline</span> T <a class="code" href="namespaceldamath.html#a1ffa1f92dba7f9bcce42ceba5b82e1f0">exponential</a>(T <span class="comment">/* x */</span>)</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;{</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  BOOST_STATIC_ASSERT_MSG(<span class="keyword">true</span>, <span class="stringliteral">&quot;ldamath::exponential is not defined for this type and math mode.&quot;</span>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">// Powf</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, lda_math_mode mtype&gt;</div><div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a3334ba50925c47fb99d4ae6e37f786c9">  421</a></span>&#160;<span class="keyword">inline</span> T <a class="code" href="namespaceldamath.html#a3334ba50925c47fb99d4ae6e37f786c9">powf</a>(T <span class="comment">/* x */</span>, T <span class="comment">/* p */</span>)</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  BOOST_STATIC_ASSERT_MSG(<span class="keyword">true</span>, <span class="stringliteral">&quot;ldamath::powf is not defined for this type and math mode.&quot;</span>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">// High accuracy float specializations:</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00429"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a3aa164f549ef2ac8cb475efa7fedaee0">  429</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a3aa164f549ef2ac8cb475efa7fedaee0">lgamma&lt;float, USE_PRECISE&gt;</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;{</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#ae78e93f0fddc20ccf041cde4135c6797">boost::math::lgamma</a>(x);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a0ed1e91e6046a0ff520540808ba16897">  434</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a0ed1e91e6046a0ff520540808ba16897">digamma&lt;float, USE_PRECISE&gt;</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;{</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#ae6499831521aca90f0dc879c84257d91">boost::math::digamma</a>(x);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="namespaceldamath.html#ae12e8ccbfc4110b4be69b6e34ee0274b">  439</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#ae12e8ccbfc4110b4be69b6e34ee0274b">exponential&lt;float, USE_PRECISE&gt;</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="correctedMath_8h.html#a9c796fdb44524ba9db47d99c594e3519">correctedExp</a>(x);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="namespaceldamath.html#aba4eaa43b8512e4b8660f7ac5cd80110">  444</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#aba4eaa43b8512e4b8660f7ac5cd80110">powf&lt;float, USE_PRECISE&gt;</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> p)</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;{</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">return</span> std::pow(x, p);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">// Fast approximation float specializations:</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a3e35e02ec1179cccb17b381adef054f3">  452</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a3e35e02ec1179cccb17b381adef054f3">lgamma&lt;float, USE_FAST_APPROX&gt;</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;{</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a9fe0220b67d6189f202bcd955946faca">fastlgamma</a>(x);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a767f43cff6774529df5a0c85056c682f">  457</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a767f43cff6774529df5a0c85056c682f">digamma&lt;float, USE_FAST_APPROX&gt;</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a5d76fa789ecc3c9eb7ee63a2c133851b">fastdigamma</a>(x);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00462"></a><span class="lineno"><a class="line" href="namespaceldamath.html#af79dd4e0e3edcaa5f1f01ab27cc3b6db">  462</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#af79dd4e0e3edcaa5f1f01ab27cc3b6db">exponential&lt;float, USE_FAST_APPROX&gt;</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;{</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="nn_8cc.html#a98f828fae7db78aa840c2e929da77daf">fastexp</a>(x);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a6f0fd6438f25c9c987668db93d1e17f3">  467</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a6f0fd6438f25c9c987668db93d1e17f3">powf&lt;float, USE_FAST_APPROX&gt;</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> p)</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a7144c84a42e3fd2894f751008c4e8fcf">fastpow</a>(x, p);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">// SIMD specializations:</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00475"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a4a66173455220f7c16a9ccd95a1a404d">  475</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a4a66173455220f7c16a9ccd95a1a404d">lgamma&lt;float, USE_SIMD&gt;</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;{</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a3e35e02ec1179cccb17b381adef054f3">lgamma&lt;float, USE_FAST_APPROX&gt;</a>(x);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;}</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a4b2e79ccc6ef2dbf8aaf22bc7eb20b1c">  480</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a4b2e79ccc6ef2dbf8aaf22bc7eb20b1c">digamma&lt;float, USE_SIMD&gt;</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;{</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a767f43cff6774529df5a0c85056c682f">digamma&lt;float, USE_FAST_APPROX&gt;</a>(x);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a990c36f9e61428f57e59ba8ec803a73d">  485</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#a990c36f9e61428f57e59ba8ec803a73d">exponential&lt;float, USE_SIMD&gt;</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#af79dd4e0e3edcaa5f1f01ab27cc3b6db">exponential&lt;float, USE_FAST_APPROX&gt;</a>(x);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00490"></a><span class="lineno"><a class="line" href="namespaceldamath.html#ab8c3094ac92f432c36046a8b710b05c1">  490</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceldamath.html#ab8c3094ac92f432c36046a8b710b05c1">powf&lt;float, USE_SIMD&gt;</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> p)</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;{</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a6f0fd6438f25c9c987668db93d1e17f3">powf&lt;float, USE_FAST_APPROX&gt;</a>(x, p);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, const lda_math_mode mtype&gt;</div><div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="namespaceldamath.html#abcc73ee6f2731b8d66dca96a6bea164c">  496</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceldamath.html#abcc73ee6f2731b8d66dca96a6bea164c">expdigammify</a>(<a class="code" href="structvw.html">vw</a> &amp;all, T *gamma, T threshold, T initial)</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  T sum = digamma&lt;T, mtype&gt;(<a class="code" href="accumulate_8cc.html#a7fd3d396201d4eda43e2fc55bbe66814">std::accumulate</a>(gamma, gamma + all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>, initial));</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  std::transform(gamma, gamma + all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>, gamma,</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      [sum, threshold](T g) { return fmax(threshold, exponential&lt;T, mtype&gt;(digamma&lt;T, mtype&gt;(g) - sum)); });</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a450aae7b53d9356014a4732c2fbbe1bc">  504</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceldamath.html#a450aae7b53d9356014a4732c2fbbe1bc">expdigammify&lt;float, USE_SIMD&gt;</a>(<a class="code" href="structvw.html">vw</a> &amp;all, <span class="keywordtype">float</span> *gamma, <span class="keywordtype">float</span> threshold, float)</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="preprocessor">#if defined(HAVE_SIMD_MATHMODE)</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  vexpdigammify(all, gamma, threshold);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="comment">// Do something sensible if SIMD math isn&#39;t available:</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  expdigammify&lt;float, USE_FAST_APPROX&gt;(all, gamma, threshold, 0.0);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, const lda_math_mode mtype&gt;</div><div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="namespaceldamath.html#a733cd0773e8c0725e3573bdab9d9dadd">  515</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceldamath.html#a733cd0773e8c0725e3573bdab9d9dadd">expdigammify_2</a>(<a class="code" href="structvw.html">vw</a> &amp;all, <span class="keywordtype">float</span> *gamma, T *norm, <span class="keyword">const</span> T threshold)</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;{</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  std::transform(gamma, gamma + all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>, norm, gamma,</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      [threshold](<span class="keywordtype">float</span> g, <span class="keywordtype">float</span> n) { return fmax(threshold, exponential&lt;T, mtype&gt;(digamma&lt;T, mtype&gt;(g) - n)); });</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="namespaceldamath.html#afd6ccb9dd46a539bfbc4c3403ea1ab66">  521</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceldamath.html#afd6ccb9dd46a539bfbc4c3403ea1ab66">expdigammify_2&lt;float, USE_SIMD&gt;</a>(<a class="code" href="structvw.html">vw</a> &amp;all, <span class="keywordtype">float</span> *gamma, <span class="keywordtype">float</span> *norm, <span class="keyword">const</span> <span class="keywordtype">float</span> threshold)</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;{</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#if defined(HAVE_SIMD_MATHMODE)</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  vexpdigammify_2(all, gamma, norm, threshold);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// Do something sensible if SIMD math isn&#39;t available:</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  expdigammify_2&lt;float, USE_FAST_APPROX&gt;(all, gamma, norm, threshold);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}  <span class="comment">// namespace ldamath</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno"><a class="line" href="structlda.html#a52ba84529de54dd14174cbbd8dfa9d19">  533</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="structlda.html#a52ba84529de54dd14174cbbd8dfa9d19">lda::digamma</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;{</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">switch</span> (mmode)</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a34bd64a6fd3602062b05d743ac770270">USE_FAST_APPROX</a>:</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="comment">// std::cerr &lt;&lt; &quot;lda::digamma FAST_APPROX &quot;;</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a767f43cff6774529df5a0c85056c682f">ldamath::digamma&lt;float, USE_FAST_APPROX&gt;</a>(x);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a218e5bceb2322cf88b9deba8d4a82695">USE_PRECISE</a>:</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="comment">// std::cerr &lt;&lt; &quot;lda::digamma PRECISE &quot;;</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a0ed1e91e6046a0ff520540808ba16897">ldamath::digamma&lt;float, USE_PRECISE&gt;</a>(x);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492">USE_SIMD</a>:</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="comment">// std::cerr &lt;&lt; &quot;lda::digamma SIMD &quot;;</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a4b2e79ccc6ef2dbf8aaf22bc7eb20b1c">ldamath::digamma&lt;float, USE_SIMD&gt;</a>(x);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="comment">// Should not happen.</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      std::cerr &lt;&lt; <span class="stringliteral">&quot;lda::digamma: Trampled or invalid math mode, aborting&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      abort();</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">return</span> 0.0f;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno"><a class="line" href="structlda.html#a8d0abbade8cb98e286e97de1eb5d3d60">  554</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="structlda.html#a8d0abbade8cb98e286e97de1eb5d3d60">lda::lgamma</a>(<span class="keywordtype">float</span> x)</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;{</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">switch</span> (mmode)</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a34bd64a6fd3602062b05d743ac770270">USE_FAST_APPROX</a>:</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="comment">// std::cerr &lt;&lt; &quot;lda::lgamma FAST_APPROX &quot;;</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a3e35e02ec1179cccb17b381adef054f3">ldamath::lgamma&lt;float, USE_FAST_APPROX&gt;</a>(x);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a218e5bceb2322cf88b9deba8d4a82695">USE_PRECISE</a>:</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="comment">// std::cerr &lt;&lt; &quot;lda::lgamma PRECISE &quot;;</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a3aa164f549ef2ac8cb475efa7fedaee0">ldamath::lgamma&lt;float, USE_PRECISE&gt;</a>(x);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492">USE_SIMD</a>:</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="comment">// std::cerr &lt;&lt; &quot;lda::gamma SIMD &quot;;</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a4a66173455220f7c16a9ccd95a1a404d">ldamath::lgamma&lt;float, USE_SIMD&gt;</a>(x);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      std::cerr &lt;&lt; <span class="stringliteral">&quot;lda::lgamma: Trampled or invalid math mode, aborting&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      abort();</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">return</span> 0.0f;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;}</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="structlda.html#ac005d1b9f65fbf23cff5f0e6fcb89e28">  574</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="structlda.html#ac005d1b9f65fbf23cff5f0e6fcb89e28">lda::powf</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> p)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;{</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">switch</span> (mmode)</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a34bd64a6fd3602062b05d743ac770270">USE_FAST_APPROX</a>:</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="comment">// std::cerr &lt;&lt; &quot;lda::powf FAST_APPROX &quot;;</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#a6f0fd6438f25c9c987668db93d1e17f3">ldamath::powf&lt;float, USE_FAST_APPROX&gt;</a>(x, p);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a218e5bceb2322cf88b9deba8d4a82695">USE_PRECISE</a>:</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="comment">// std::cerr &lt;&lt; &quot;lda::powf PRECISE &quot;;</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#aba4eaa43b8512e4b8660f7ac5cd80110">ldamath::powf&lt;float, USE_PRECISE&gt;</a>(x, p);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492">USE_SIMD</a>:</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="comment">// std::cerr &lt;&lt; &quot;lda::powf SIMD &quot;;</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceldamath.html#ab8c3094ac92f432c36046a8b710b05c1">ldamath::powf&lt;float, USE_SIMD&gt;</a>(x, p);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      std::cerr &lt;&lt; <span class="stringliteral">&quot;lda::powf: Trampled or invalid math mode, aborting&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      abort();</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">return</span> 0.0f;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;}</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="structlda.html#a117249eef1239a1d96a1708f7466d1c5">  594</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structlda.html#a117249eef1239a1d96a1708f7466d1c5">lda::expdigammify</a>(<a class="code" href="structvw.html">vw</a> &amp;all, <span class="keywordtype">float</span> *gamma)</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;{</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordflow">switch</span> (mmode)</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a34bd64a6fd3602062b05d743ac770270">USE_FAST_APPROX</a>:</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      ldamath::expdigammify&lt;float, USE_FAST_APPROX&gt;(all, gamma, underflow_threshold, 0.0f);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a218e5bceb2322cf88b9deba8d4a82695">USE_PRECISE</a>:</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      ldamath::expdigammify&lt;float, USE_PRECISE&gt;(all, gamma, underflow_threshold, 0.0f);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492">USE_SIMD</a>:</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="namespaceldamath.html#a450aae7b53d9356014a4732c2fbbe1bc">ldamath::expdigammify&lt;float, USE_SIMD&gt;</a>(all, gamma, underflow_threshold, 0.0f);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      std::cerr &lt;&lt; <span class="stringliteral">&quot;lda::expdigammify: Trampled or invalid math mode, aborting&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      abort();</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="structlda.html#a5eae5b0e981a13dd68408d07a8a31250">  613</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structlda.html#a5eae5b0e981a13dd68408d07a8a31250">lda::expdigammify_2</a>(<a class="code" href="structvw.html">vw</a> &amp;all, <span class="keywordtype">float</span> *gamma, <span class="keywordtype">float</span> *norm)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;{</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">switch</span> (mmode)</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a34bd64a6fd3602062b05d743ac770270">USE_FAST_APPROX</a>:</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      ldamath::expdigammify_2&lt;float, USE_FAST_APPROX&gt;(all, gamma, norm, underflow_threshold);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a218e5bceb2322cf88b9deba8d4a82695">USE_PRECISE</a>:</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      ldamath::expdigammify_2&lt;float, USE_PRECISE&gt;(all, gamma, norm, underflow_threshold);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492">USE_SIMD</a>:</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <a class="code" href="namespaceldamath.html#afd6ccb9dd46a539bfbc4c3403ea1ab66">ldamath::expdigammify_2&lt;float, USE_SIMD&gt;</a>(all, gamma, norm, underflow_threshold);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      std::cerr &lt;&lt; <span class="stringliteral">&quot;lda::expdigammify_2: Trampled or invalid math mode, aborting&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      abort();</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;}</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#aa309e2b6f0c3a0e8785ba9b7d5495297">  632</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="lda__core_8cc.html#aa309e2b6f0c3a0e8785ba9b7d5495297">average_diff</a>(<a class="code" href="structvw.html">vw</a> &amp;all, <span class="keywordtype">float</span> *oldgamma, <span class="keywordtype">float</span> *newgamma)</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;{</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="keywordtype">float</span> sum;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordtype">float</span> normalizer;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="comment">// This warps the normal sense of &quot;inner product&quot;, but it accomplishes the same</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="comment">// thing as the &quot;plain old&quot; for loop. clang does a good job of reducing the</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="comment">// common subexpressions.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  sum = std::inner_product(</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      oldgamma, oldgamma + all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>, newgamma, 0.0f, [](<span class="keywordtype">float</span> accum, <span class="keywordtype">float</span> <a class="code" href="namespaceSearch.html#ab2e1382e823e42ee5e13b33f9653a8ce">absdiff</a>) { return accum + absdiff; },</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      [](<span class="keywordtype">float</span> old_g, <span class="keywordtype">float</span> new_g) { return std::abs(old_g - new_g); });</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  normalizer = <a class="code" href="accumulate_8cc.html#a7fd3d396201d4eda43e2fc55bbe66814">std::accumulate</a>(newgamma, newgamma + all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>, 0.0f);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">return</span> sum / normalizer;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">// Returns E_q[log p(\theta)] - E_q[log q(\theta)].</span></div><div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#abd2a910d6de296d1b242ac1c672c8018">  649</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="lda__core_8cc.html#abd2a910d6de296d1b242ac1c672c8018">theta_kl</a>(<a class="code" href="structlda.html">lda</a> &amp;l, <a class="code" href="structv__array.html">v_array&lt;float&gt;</a> &amp;Elogtheta, <span class="keywordtype">float</span> *gamma)</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;{</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordtype">float</span> gammasum = 0;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  Elogtheta.<a class="code" href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">clear</a>();</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>; k++)</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    Elogtheta.<a class="code" href="structv__array.html#afd6a4614f027ac5f786507552ce13f13">push_back</a>(l.<a class="code" href="structlda.html#a52ba84529de54dd14174cbbd8dfa9d19">digamma</a>(gamma[k]));</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    gammasum += gamma[k];</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordtype">float</span> digammasum = l.<a class="code" href="structlda.html#a52ba84529de54dd14174cbbd8dfa9d19">digamma</a>(gammasum);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  gammasum = l.<a class="code" href="structlda.html#a8d0abbade8cb98e286e97de1eb5d3d60">lgamma</a>(gammasum);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordtype">float</span> kl = -(l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a> * l.<a class="code" href="structlda.html#a8d0abbade8cb98e286e97de1eb5d3d60">lgamma</a>(l.<a class="code" href="structlda.html#a3a96e670640968e073731102bf224ff3">lda_alpha</a>));</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  kl += l.<a class="code" href="structlda.html#a8d0abbade8cb98e286e97de1eb5d3d60">lgamma</a>(l.<a class="code" href="structlda.html#a3a96e670640968e073731102bf224ff3">lda_alpha</a> * l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>) - gammasum;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>; k++)</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    Elogtheta[k] -= digammasum;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    kl += (l.<a class="code" href="structlda.html#a3a96e670640968e073731102bf224ff3">lda_alpha</a> - gamma[k]) * Elogtheta[k];</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    kl += l.<a class="code" href="structlda.html#a8d0abbade8cb98e286e97de1eb5d3d60">lgamma</a>(gamma[k]);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">return</span> kl;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;}</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#abe28009ec8aedc966879e195d6b73b26">  672</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="lda__core_8cc.html#abe28009ec8aedc966879e195d6b73b26">find_cw</a>(<a class="code" href="structlda.html">lda</a> &amp;l, <span class="keywordtype">float</span> *u_for_w, <span class="keywordtype">float</span> *v)</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;{</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">return</span> 1.0f / std::inner_product(u_for_w, u_for_w + l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>, v, 0.0f);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="keyword">namespace</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;{</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">// Effectively, these are static and not visible outside the compilation unit.</span></div><div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">  680</a></span>&#160;<a class="code" href="structv__array.html">v_array&lt;float&gt;</a> <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a> = v_init&lt;float&gt;();</div><div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ae842b3fb620232fcae837ff12750df2f">  681</a></span>&#160;<a class="code" href="structv__array.html">v_array&lt;float&gt;</a> <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ae842b3fb620232fcae837ff12750df2f">old_gamma</a> = v_init&lt;float&gt;();</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}  <span class="comment">// namespace</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">// Returns an estimate of the part of the variational bound that</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">// doesn&#39;t have to do with beta for the entire corpus for the current</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">// setting of lambda based on the document passed in. The value is</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">// divided by the total number of words in the document This can be</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">// used as a (possibly very noisy) estimate of held-out likelihood.</span></div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a919b85398291ef989b7a29a3fa353ae3">  689</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="lda__core_8cc.html#a919b85398291ef989b7a29a3fa353ae3">lda_loop</a>(<a class="code" href="structlda.html">lda</a> &amp;l, <a class="code" href="structv__array.html">v_array&lt;float&gt;</a> &amp;Elogtheta, <span class="keywordtype">float</span> *v, <a class="code" href="structexample.html">example</a> *ec, <span class="keywordtype">float</span>)</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;{</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="classparameters.html">parameters</a> &amp;weights = l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>.<a class="code" href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">clear</a>();</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ae842b3fb620232fcae837ff12750df2f">old_gamma</a>.<a class="code" href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">clear</a>();</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>; i++)</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>.<a class="code" href="structv__array.html#afd6a4614f027ac5f786507552ce13f13">push_back</a>(1.<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ae842b3fb620232fcae837ff12750df2f">old_gamma</a>.<a class="code" href="structv__array.html#afd6a4614f027ac5f786507552ce13f13">push_back</a>(0.<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordtype">size_t</span> num_words = 0;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structfeatures.html">features</a> &amp;fs : *ec) num_words += fs.size();</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordtype">float</span> xc_w = 0;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordtype">float</span> score = 0;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordtype">float</span> doc_length = 0;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    memcpy(v, <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>(), <span class="keyword">sizeof</span>(float) * l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    l.<a class="code" href="structlda.html#a117249eef1239a1d96a1708f7466d1c5">expdigammify</a>(*l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>, v);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    memcpy(<a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ae842b3fb620232fcae837ff12750df2f">old_gamma</a>.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>(), <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>(), <span class="keyword">sizeof</span>(float) * l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    memset(<a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>(), 0, <span class="keyword">sizeof</span>(float) * l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    score = 0;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordtype">size_t</span> word_count = 0;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    doc_length = 0;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structfeatures.html">features</a> &amp;fs : *ec)</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classfeatures__value__index__iterator.html">features::iterator</a> &amp;<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> : fs)</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keywordtype">float</span> *u_for_w = &amp;(weights[<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>.index()]) + l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a> + 1;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordtype">float</span> c_w = <a class="code" href="lda__core_8cc.html#abe28009ec8aedc966879e195d6b73b26">find_cw</a>(l, u_for_w, v);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        xc_w = c_w * <a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>.value();</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        score += -<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>.value() * log(c_w);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keywordtype">size_t</span> max_k = l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; max_k; k++, ++u_for_w) <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>[k] += xc_w * *u_for_w;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        word_count++;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        doc_length += <a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>.value();</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>; k++) <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>[k] = <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>[k] * v[k] + l.<a class="code" href="structlda.html#a3a96e670640968e073731102bf224ff3">lda_alpha</a>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  } <span class="keywordflow">while</span> (<a class="code" href="lda__core_8cc.html#aa309e2b6f0c3a0e8785ba9b7d5495297">average_diff</a>(*l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>, <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ae842b3fb620232fcae837ff12750df2f">old_gamma</a>.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>(), <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>()) &gt; l.<a class="code" href="structlda.html#a526d03cdba0f11c46aa429211c5b9c8a">lda_epsilon</a>);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  ec-&gt;pred.scalars.clear();</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  ec-&gt;pred.scalars.resize(l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  memcpy(ec-&gt;pred.scalars.begin(), <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>(), l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a> * <span class="keyword">sizeof</span>(float));</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  ec-&gt;pred.scalars.end() = ec-&gt;pred.scalars.begin() + l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  score += <a class="code" href="lda__core_8cc.html#abd2a910d6de296d1b242ac1c672c8018">theta_kl</a>(l, Elogtheta, <a class="code" href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">new_gamma</a>.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>());</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">return</span> score / doc_length;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;}</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#aa334f2ff33ee71bb2c308b6d96ee38c5">  744</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="lda__core_8cc.html#aa334f2ff33ee71bb2c308b6d96ee38c5">next_pow2</a>(<span class="keywordtype">size_t</span> x)</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;{</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  x = x &gt; 0 ? x - 1 : 0;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="keywordflow">while</span> (x &gt; 0)</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  {</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    x &gt;&gt;= 1;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    i++;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  }</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="keywordflow">return</span> ((<span class="keywordtype">size_t</span>)1) &lt;&lt; i;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;}</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno"><a class="line" href="structinitial__weights.html">  756</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structinitial__weights.html">initial_weights</a></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;{</div><div class="line"><a name="l00758"></a><span class="lineno"><a class="line" href="structinitial__weights.html#aa138c35e8a2317f6e7320fc234418790">  758</a></span>&#160;  <a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> <a class="code" href="structinitial__weights.html#aa138c35e8a2317f6e7320fc234418790">_initial</a>;</div><div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="structinitial__weights.html#aee78b3abdf9950616b6531949c80fd19">  759</a></span>&#160;  <a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> <a class="code" href="structinitial__weights.html#aee78b3abdf9950616b6531949c80fd19">_initial_random</a>;</div><div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="structinitial__weights.html#a1c832f1617a7f1e078854ac3f28a1e4d">  760</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structinitial__weights.html#a1c832f1617a7f1e078854ac3f28a1e4d">_random</a>;</div><div class="line"><a name="l00761"></a><span class="lineno"><a class="line" href="structinitial__weights.html#a046d45914ddfcc80fb6ba7a883451a37">  761</a></span>&#160;  uint32_t <a class="code" href="structinitial__weights.html#a046d45914ddfcc80fb6ba7a883451a37">_lda</a>;</div><div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="structinitial__weights.html#ac928a0ba117c0ee0dfc9c610fbb5e394">  762</a></span>&#160;  uint32_t <a class="code" href="structinitial__weights.html#ac928a0ba117c0ee0dfc9c610fbb5e394">_stride</a>;</div><div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="structinitial__weights.html#affdce96db46a11930133fe2294b19a58">  763</a></span>&#160;  <a class="code" href="structinitial__weights.html#affdce96db46a11930133fe2294b19a58">initial_weights</a>(<a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> initial, <a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> initial_random, <span class="keywordtype">bool</span> <a class="code" href="namespaceSearch.html#a17d4f427c69b48a8673c621a403dca30">random</a>, uint32_t <a class="code" href="structlda.html">lda</a>, uint32_t stride)</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      : _initial(initial), _initial_random(initial_random), _random(random), _lda(lda), _stride(stride)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  }</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;};</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div><div class="line"><a name="l00770"></a><span class="lineno"><a class="line" href="classset__initial__lda__wrapper.html">  770</a></span>&#160;<span class="keyword">class </span><a class="code" href="classset__initial__lda__wrapper.html">set_initial_lda_wrapper</a></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;{</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00773"></a><span class="lineno"><a class="line" href="classset__initial__lda__wrapper.html#a488d7f2be96f4b040327ab30cbb57074">  773</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classset__initial__lda__wrapper.html#a488d7f2be96f4b040327ab30cbb57074">func</a>(<a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> &amp;w, <a class="code" href="structinitial__weights.html">initial_weights</a> &amp;iw, uint64_t index)</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  {</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    uint32_t <a class="code" href="structlda.html">lda</a> = iw.<a class="code" href="structinitial__weights.html#a046d45914ddfcc80fb6ba7a883451a37">_lda</a>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> initial_random = iw.<a class="code" href="structinitial__weights.html#aee78b3abdf9950616b6531949c80fd19">_initial_random</a>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span> (iw.<a class="code" href="structinitial__weights.html#a1c832f1617a7f1e078854ac3f28a1e4d">_random</a>)</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      <a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> *pw = &amp;w;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i != lda; ++i, ++index) pw[i] = (<span class="keywordtype">float</span>)(-log(<a class="code" href="rand48_8cc.html#a64cab1594b4166e9442ee1429123044b">merand48</a>(index) + 1e-6) + 1.0f) * initial_random;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    (&amp;w)[lda] = iw.<a class="code" href="structinitial__weights.html#aa138c35e8a2317f6e7320fc234418790">_initial</a>;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;};</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#af06105ab6103c75445b03e6aa2060dec">  786</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#af06105ab6103c75445b03e6aa2060dec">save_load</a>(<a class="code" href="structlda.html">lda</a> &amp;l, <a class="code" href="classio__buf.html">io_buf</a> &amp;model_file, <span class="keywordtype">bool</span> read, <span class="keywordtype">bool</span> text)</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;{</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <a class="code" href="structvw.html">vw</a> &amp;all = *(l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  uint64_t length = (uint64_t)1 &lt;&lt; all.<a class="code" href="structvw.html#a01b6f14b593ea5a2fe5ae65dead97fab">num_bits</a>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  if (read)</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="parse__regressor_8cc.html#ae98d6ec7706d1d12b3806b50908fc1b8">initialize_regressor</a>(all);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="structinitial__weights.html">initial_weights</a> init(all.<a class="code" href="structvw.html#a1bd6ce7ea965d9d809dd3cd99acb3a98">initial_t</a>, (<span class="keywordtype">float</span>)(l.<a class="code" href="structlda.html#a63e56d9031626e4d0e3871869a975fd9">lda_D</a> / all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a> / all.<a class="code" href="structvw.html#ab73b9bae2e902cf1278e5a3f232832fc">length</a>() * 200), all.<a class="code" href="structvw.html#a05bba1784a89d36504b338811468359a">random_weights</a>, all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>,</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        all.<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#a87a8ac5b3d13ff7241b84b2dc0088813">stride</a>());</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">if</span> (all.<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#a83947face4285f451b42f9283ea127e8">sparse</a>)</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      all.<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#a276f4673850e9650c1360a78c9afab97">sparse_weights</a>.<a class="code" href="classsparse__parameters.html#a223ec5a32439fb79b2b026c952868424">set_default</a>&lt;<a class="code" href="structinitial__weights.html">initial_weights</a>, <a class="code" href="classset__initial__lda__wrapper.html">set_initial_lda_wrapper&lt;sparse_parameters&gt;</a>&gt;(init);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      all.<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#aaac8b2f50c6d9ee2946d09c9183b4029">dense_weights</a>.<a class="code" href="classdense__parameters.html#ab55da22b1a73b4f20e278c1084098918">set_default</a>&lt;<a class="code" href="structinitial__weights.html">initial_weights</a>, <a class="code" href="classset__initial__lda__wrapper.html">set_initial_lda_wrapper&lt;dense_parameters&gt;</a>&gt;(init);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  }</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keywordflow">if</span> (!model_file.<a class="code" href="classio__buf.html#a2126363251fc091d8ed2356b7c50f551">files</a>.<a class="code" href="structv__array.html#a01916436cabbd621bf40731f78360550">empty</a>())</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    uint64_t i = 0;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    std::stringstream msg;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordtype">size_t</span> brw = 1;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">do</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      brw = 0;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keywordtype">size_t</span> K = all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">if</span> (!read &amp;&amp; text)</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        msg &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="keywordflow">if</span> (!read || all.<a class="code" href="structvw.html#aef7628e009ca4bfa6a5caf4ffcfd4fb5">model_file_ver</a> &gt;= <a class="code" href="vw__versions_8h.html#af95fe020b67c477c6e9fc931a1abc836">VERSION_FILE_WITH_HEADER_ID</a>)</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        brw += <a class="code" href="io__buf_8h.html#a317681947f2ac8ceda45d4b16e852225">bin_text_read_write_fixed</a>(model_file, (<span class="keywordtype">char</span> *)&amp;i, <span class="keyword">sizeof</span>(i), <span class="stringliteral">&quot;&quot;</span>, read, msg, text);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      {</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="comment">// support 32bit build models</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        uint32_t j;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        brw += <a class="code" href="io__buf_8h.html#a317681947f2ac8ceda45d4b16e852225">bin_text_read_write_fixed</a>(model_file, (<span class="keywordtype">char</span> *)&amp;j, <span class="keyword">sizeof</span>(j), <span class="stringliteral">&quot;&quot;</span>, read, msg, text);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        i = j;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      }</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keywordflow">if</span> (brw != 0)</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> *w = &amp;(all.<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#af0e5e373c537634e67391d7f75675498">strided_index</a>(i));</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="keywordflow">for</span> (uint64_t k = 0; k &lt; K; k++)</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;          <a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> *v = w + k;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;          <span class="keywordflow">if</span> (!read &amp;&amp; text)</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            msg &lt;&lt; *v + l.<a class="code" href="structlda.html#ab9ff4429e8d145b8068a04dc8c61f572">lda_rho</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;          brw += <a class="code" href="io__buf_8h.html#a317681947f2ac8ceda45d4b16e852225">bin_text_read_write_fixed</a>(model_file, (<span class="keywordtype">char</span> *)v, <span class="keyword">sizeof</span>(*v), <span class="stringliteral">&quot;&quot;</span>, read, msg, text);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="keywordflow">if</span> (text)</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">if</span> (!read)</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;          msg &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        brw += <a class="code" href="io__buf_8h.html#a317681947f2ac8ceda45d4b16e852225">bin_text_read_write_fixed</a>(model_file, <span class="keyword">nullptr</span>, 0, <span class="stringliteral">&quot;&quot;</span>, read, msg, text);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">if</span> (!read)</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        ++i;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    } <span class="keywordflow">while</span> ((!read &amp;&amp; i &lt; length) || (read &amp;&amp; brw &gt; 0));</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;}</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a8e4a755a1fe7e8c811372e614fce7f85">  846</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#a8e4a755a1fe7e8c811372e614fce7f85">return_example</a>(<a class="code" href="structvw.html">vw</a> &amp;all, <a class="code" href="structexample.html">example</a> &amp;ec)</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;{</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  all.<a class="code" href="structvw.html#aada16c220b8d3eaf62aaee86168dde5e">sd</a>-&gt;<a class="code" href="structshared__data.html#ad3b0fc9176c689eb63bf255499223c62">update</a>(ec.<a class="code" href="structexample.html#aafed65a0405faa864c87b8b75d39ef4d">test_only</a>, <span class="keyword">true</span>, ec.<a class="code" href="structexample.html#aec82f8fecc8ad2a13e54ecf83dfbc5c9">loss</a>, ec.<a class="code" href="structexample.html#a403be75fc4fdd058e4f7c1baf39be11a">weight</a>, ec.<a class="code" href="structexample.html#a35f3ec2680a21f971548cf5bb9f1fda0">num_features</a>);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> : all.<a class="code" href="structvw.html#a0e33c9d541494dd47ffb4e35c82fb982">final_prediction_sink</a>) <a class="code" href="namespaceMWT.html#a4e83e3de636837d39f1bb9c154f1fc9f">MWT::print_scalars</a>(f, ec.<a class="code" href="structexample.html#ad1477e890371ed8253f1953d4190ba49">pred</a>.<a class="code" href="unionpolyprediction.html#acd55cc5dd67b6cb5a527bf2bdc66bf15">scalars</a>, ec.<a class="code" href="structexample.html#ae05e98faef8389156ebb6d8f823ca378">tag</a>);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">if</span> (all.<a class="code" href="structvw.html#aada16c220b8d3eaf62aaee86168dde5e">sd</a>-&gt;<a class="code" href="structshared__data.html#a2997e24e8f7088cf4c1f782038238ae6">weighted_examples</a>() &gt;= all.<a class="code" href="structvw.html#aada16c220b8d3eaf62aaee86168dde5e">sd</a>-&gt;<a class="code" href="structshared__data.html#acc14d5e78772dd39829a82e4df2912d7">dump_interval</a> &amp;&amp; !all.<a class="code" href="structvw.html#a6f3a5a390dca7aeac4ab2116bcc3f8a8">logger</a>.<a class="code" href="structvw__logger.html#acc133e9fe5e6ab548f36a8d4dc0a85b0">quiet</a>)</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    all.<a class="code" href="structvw.html#aada16c220b8d3eaf62aaee86168dde5e">sd</a>-&gt;<a class="code" href="structshared__data.html#a98f490723d23eacc5e3378526669e0c3">print_update</a>(</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        all.<a class="code" href="structvw.html#a90c1e35f2e7ad5988c0084c175f57d67">holdout_set_off</a>, all.<a class="code" href="structvw.html#a1f68b6894ba36213ed87a7e2a68d5d4c">current_pass</a>, <span class="stringliteral">&quot;none&quot;</span>, 0, ec.<a class="code" href="structexample.html#a35f3ec2680a21f971548cf5bb9f1fda0">num_features</a>, all.<a class="code" href="structvw.html#ab7b7f1e764da852d44b5e900fa991d95">progress_add</a>, all.<a class="code" href="structvw.html#a33eefadb9fb5b904e8454a4c864f47a3">progress_arg</a>);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <a class="code" href="namespaceVW.html#a67d2e194f1865809a14c8f3899497c4c">VW::finish_example</a>(all, ec);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;}</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#ae803a6864f29306ef9775e7f0a28ded6">  857</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#ae803a6864f29306ef9775e7f0a28ded6">learn_batch</a>(<a class="code" href="structlda.html">lda</a> &amp;l)</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;{</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <a class="code" href="classparameters.html">parameters</a> &amp;weights = l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordflow">if</span> (l.<a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>.empty())  <span class="comment">// FAST-PASS for real &quot;true&quot;</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="comment">// This can happen when the socket connection is dropped by the client.</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="comment">// If l.sorted_features is empty, then l.sorted_features[0] does not</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="comment">// exist, so we should not try to take its address in the beginning of</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="comment">// the for loops down there. Since it seems that there&#39;s not much to</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="comment">// do in this case, we just return.</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> d = 0; d &lt; l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>.<a class="code" href="structv__array.html#a903166906624e9e31efe5d1df9bcb092">size</a>(); d++)</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>[d]-&gt;pred.scalars.<a class="code" href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">clear</a>();</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>[d]-&gt;pred.scalars.<a class="code" href="structv__array.html#a4a32b45f55342a03095d74e7d4131ca3">resize</a>(l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      memset(l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>[d]-&gt;pred.scalars.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>(), 0, l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a> * <span class="keyword">sizeof</span>(float));</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>[d]-&gt;pred.scalars.<a class="code" href="structv__array.html#a1e8f3cf7ad69b05b38c016b09d85010d">end</a>() = l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>[d]-&gt;pred.scalars.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>() + l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>[d]-&gt;pred.scalars.<a class="code" href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">clear</a>();</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="lda__core_8cc.html#a8e4a755a1fe7e8c811372e614fce7f85">return_example</a>(*l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>, *l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>[d]);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>.<a class="code" href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">clear</a>();</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keywordtype">float</span> eta = -1;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keywordtype">float</span> minuseta = -1;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">if</span> (l.<a class="code" href="structlda.html#acbad9c7bed9b39d6232edf989e2568d1">total_lambda</a>.<a class="code" href="structv__array.html#a01916436cabbd621bf40731f78360550">empty</a>())</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>; k++) l.<a class="code" href="structlda.html#acbad9c7bed9b39d6232edf989e2568d1">total_lambda</a>.<a class="code" href="structv__array.html#afd6a4614f027ac5f786507552ce13f13">push_back</a>(0.f);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">// This part does not work with sparse parameters</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordtype">size_t</span> stride = weights.<a class="code" href="classparameters.html#a87a8ac5b3d13ff7241b84b2dc0088813">stride</a>();</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt;= weights.<a class="code" href="classparameters.html#a417b307b1980e9744d7f2b94acd3a4b2">mask</a>(); i += stride)</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> *w = &amp;(weights[i]);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>; k++) l.<a class="code" href="structlda.html#acbad9c7bed9b39d6232edf989e2568d1">total_lambda</a>[k] += w[k];</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  l.<a class="code" href="structlda.html#ad0ed0ebccaf968c83a290c2e23175c7e">example_t</a>++;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  l.<a class="code" href="structlda.html#a01778886ae22ac1468ffd88942981c4b">total_new</a>.<a class="code" href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">clear</a>();</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>; k++) l.<a class="code" href="structlda.html#a01778886ae22ac1468ffd88942981c4b">total_new</a>.<a class="code" href="structv__array.html#afd6a4614f027ac5f786507552ce13f13">push_back</a>(0.f);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordtype">size_t</span> batch_size = l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>.<a class="code" href="structv__array.html#a903166906624e9e31efe5d1df9bcb092">size</a>();</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  sort(l.<a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>.begin(), l.<a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>.end());</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  eta = l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a939cbdaf20c78bfeabfddbf57c9d8250">eta</a> * l.<a class="code" href="structlda.html#ac005d1b9f65fbf23cff5f0e6fcb89e28">powf</a>((<span class="keywordtype">float</span>)l.<a class="code" href="structlda.html#ad0ed0ebccaf968c83a290c2e23175c7e">example_t</a>, -l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a704c8131419ddb9518861b6b94bc0f0b">power_t</a>);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  minuseta = 1.0f - eta;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  eta *= l.<a class="code" href="structlda.html#a63e56d9031626e4d0e3871869a975fd9">lda_D</a> / batch_size;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  l.<a class="code" href="structlda.html#a040db4ac52102609348b008125b76784">decay_levels</a>.<a class="code" href="structv__array.html#afd6a4614f027ac5f786507552ce13f13">push_back</a>(l.<a class="code" href="structlda.html#a040db4ac52102609348b008125b76784">decay_levels</a>.<a class="code" href="structv__array.html#aaad3f3fbd9694eb40a85d9dd3e4959ce">last</a>() + log(minuseta));</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  l.<a class="code" href="structlda.html#a8be33866789db85fb0da45a64a30433e">digammas</a>.<a class="code" href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">clear</a>();</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordtype">float</span> additional = (float)(l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#ab73b9bae2e902cf1278e5a3f232832fc">length</a>()) * l.<a class="code" href="structlda.html#ab9ff4429e8d145b8068a04dc8c61f572">lda_rho</a>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  for (<span class="keywordtype">size_t</span> i = 0; i &lt; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>; i++) l.<a class="code" href="structlda.html#a8be33866789db85fb0da45a64a30433e">digammas</a>.<a class="code" href="structv__array.html#afd6a4614f027ac5f786507552ce13f13">push_back</a>(l.<a class="code" href="structlda.html#a52ba84529de54dd14174cbbd8dfa9d19">digamma</a>(l.<a class="code" href="structlda.html#acbad9c7bed9b39d6232edf989e2568d1">total_lambda</a>[i] + additional));</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  uint64_t last_weight_index = -1;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classindex__feature.html">index_feature</a> *s = &amp;l.<a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>[0]; s &lt;= &amp;l.<a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>.back(); s++)</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">if</span> (last_weight_index == s-&gt;f.weight_index)</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    last_weight_index = s-&gt;f.weight_index;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="comment">// float *weights_for_w = &amp;(weights[s-&gt;f.weight_index]);</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordtype">float</span> *weights_for_w = &amp;(weights[s-&gt;f.weight_index &amp; weights.<a class="code" href="classparameters.html#a417b307b1980e9744d7f2b94acd3a4b2">mask</a>()]);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordtype">float</span> decay_component =</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        l.<a class="code" href="structlda.html#a040db4ac52102609348b008125b76784">decay_levels</a>.<a class="code" href="structv__array.html#a1e8f3cf7ad69b05b38c016b09d85010d">end</a>()[-2] - l.<a class="code" href="structlda.html#a040db4ac52102609348b008125b76784">decay_levels</a>.<a class="code" href="structv__array.html#a1e8f3cf7ad69b05b38c016b09d85010d">end</a>()[(int)(-1 - l.<a class="code" href="structlda.html#ad0ed0ebccaf968c83a290c2e23175c7e">example_t</a> + *(weights_for_w + l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>))];</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordtype">float</span> decay = fmin(1.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>, <a class="code" href="correctedMath_8h.html#a9c796fdb44524ba9db47d99c594e3519">correctedExp</a>(decay_component));</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordtype">float</span> *u_for_w = weights_for_w + l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a> + 1;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    *(weights_for_w + l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>) = (<span class="keywordtype">float</span>)l.<a class="code" href="structlda.html#ad0ed0ebccaf968c83a290c2e23175c7e">example_t</a>;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>; k++)</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      weights_for_w[k] *= decay;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      u_for_w[k] = weights_for_w[k] + l.<a class="code" href="structlda.html#ab9ff4429e8d145b8068a04dc8c61f572">lda_rho</a>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    l.<a class="code" href="structlda.html#a5eae5b0e981a13dd68408d07a8a31250">expdigammify_2</a>(*l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>, u_for_w, l.<a class="code" href="structlda.html#a8be33866789db85fb0da45a64a30433e">digammas</a>.<a class="code" href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">begin</a>());</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> d = 0; d &lt; batch_size; d++)</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  {</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordtype">float</span> score = <a class="code" href="lda__core_8cc.html#a919b85398291ef989b7a29a3fa353ae3">lda_loop</a>(l, l.<a class="code" href="structlda.html#af86142c45e95f4c4979e8e5e62aefaf4">Elogtheta</a>, &amp;(l.<a class="code" href="structlda.html#ae912b131d324029d50cfdb4d1a7b9956">v</a>[d * l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>]), l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>[d], l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a704c8131419ddb9518861b6b94bc0f0b">power_t</a>);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a6429c2918e06d399a27ccaf4000e4e33">audit</a>)</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <a class="code" href="namespaceGD.html#afa9b5f6fb6d2a225eb250310bd4333cd">GD::print_audit_features</a>(*l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>, *l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>[d]);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="comment">// If the doc is empty, give it loss of 0.</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">if</span> (l.<a class="code" href="structlda.html#ac39ef81ca4320c193b2417226691c77d">doc_lengths</a>[d] &gt; 0)</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    {</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#aada16c220b8d3eaf62aaee86168dde5e">sd</a>-&gt;<a class="code" href="structshared__data.html#aadcbe6fbce05c332e87da9aa517b439e">sum_loss</a> -= score;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#aada16c220b8d3eaf62aaee86168dde5e">sd</a>-&gt;<a class="code" href="structshared__data.html#ac170e7cf74cd37469fab0ea76bf19ff5">sum_loss_since_last_dump</a> -= score;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <a class="code" href="lda__core_8cc.html#a8e4a755a1fe7e8c811372e614fce7f85">return_example</a>(*l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>, *l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>[d]);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="comment">// -t there&#39;s no need to update weights (especially since it&#39;s a noop)</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keywordflow">if</span> (eta != 0)</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classindex__feature.html">index_feature</a> *s = &amp;l.<a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>[0]; s &lt;= &amp;l.<a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>.back();)</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      <a class="code" href="classindex__feature.html">index_feature</a> *next = s + 1;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">while</span> (next &lt;= &amp;l.<a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>.back() &amp;&amp; next-&gt;<a class="code" href="classindex__feature.html#ae794cb76a8e0a2867b76032307ecfec6">f</a>.<a class="code" href="structfeature.html#a0a02b4c4c785a3ee3f8f1503ef7e4616">weight_index</a> == s-&gt;f.weight_index) next++;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <span class="keywordtype">float</span> *word_weights = &amp;(weights[s-&gt;f.weight_index]);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>; k++, ++word_weights)</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      {</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="keywordtype">float</span> new_value = minuseta * *word_weights;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        *word_weights = new_value;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      }</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keywordflow">for</span> (; s != next; s++)</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      {</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordtype">float</span> *v_s = &amp;(l.<a class="code" href="structlda.html#ae912b131d324029d50cfdb4d1a7b9956">v</a>[s-&gt;document * l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>]);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keywordtype">float</span> *u_for_w = &amp;(weights[s-&gt;f.weight_index]) + l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a> + 1;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="keywordtype">float</span> c_w = eta * <a class="code" href="lda__core_8cc.html#abe28009ec8aedc966879e195d6b73b26">find_cw</a>(l, u_for_w, v_s) * s-&gt;f.x;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        word_weights = &amp;(weights[s-&gt;f.weight_index]);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>; k++, ++u_for_w, ++word_weights)</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;          <span class="keywordtype">float</span> new_value = *u_for_w * v_s[k] * c_w;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;          l.<a class="code" href="structlda.html#a01778886ae22ac1468ffd88942981c4b">total_new</a>[k] += new_value;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;          *word_weights += new_value;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        }</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      }</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    }</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>; k++)</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      l.<a class="code" href="structlda.html#acbad9c7bed9b39d6232edf989e2568d1">total_lambda</a>[k] *= minuseta;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      l.<a class="code" href="structlda.html#acbad9c7bed9b39d6232edf989e2568d1">total_lambda</a>[k] += l.<a class="code" href="structlda.html#a01778886ae22ac1468ffd88942981c4b">total_new</a>[k];</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    }</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  l.<a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>.resize(0);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>.<a class="code" href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">clear</a>();</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  l.<a class="code" href="structlda.html#ac39ef81ca4320c193b2417226691c77d">doc_lengths</a>.<a class="code" href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">clear</a>();</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;}</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a22c730bc5c07c9cfffcf5c9c25a2b1ed">  992</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#a22c730bc5c07c9cfffcf5c9c25a2b1ed">learn</a>(<a class="code" href="structlda.html">lda</a> &amp;l, <a class="code" href="structLEARNER_1_1learner.html">LEARNER::single_learner</a> &amp;, <a class="code" href="structexample.html">example</a> &amp;ec)</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;{</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  uint32_t num_ex = (uint32_t)l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>.<a class="code" href="structv__array.html#a903166906624e9e31efe5d1df9bcb092">size</a>();</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>.<a class="code" href="structv__array.html#afd6a4614f027ac5f786507552ce13f13">push_back</a>(&amp;ec);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  l.<a class="code" href="structlda.html#ac39ef81ca4320c193b2417226691c77d">doc_lengths</a>.<a class="code" href="structv__array.html#afd6a4614f027ac5f786507552ce13f13">push_back</a>(0);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structfeatures.html">features</a> &amp;fs : ec)</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classfeatures__value__index__iterator.html">features::iterator</a> &amp;<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> : fs)</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <a class="code" href="classindex__feature.html">index_feature</a> temp = {num_ex, <a class="code" href="structfeature.html">feature</a>(<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>.value(), <a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>.index())};</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      l.<a class="code" href="structlda.html#a544e43df89959594ca610605c89f4561">sorted_features</a>.push_back(temp);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      l.<a class="code" href="structlda.html#ac39ef81ca4320c193b2417226691c77d">doc_lengths</a>[num_ex] += (int)<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>.value();</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    }</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  }</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="keywordflow">if</span> (++num_ex == l.<a class="code" href="structlda.html#abf4130f3c19476d235616369349a7a03">minibatch</a>)</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="lda__core_8cc.html#ae803a6864f29306ef9775e7f0a28ded6">learn_batch</a>(l);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;}</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a524f10cb8d6469c4f0594b084ec374a2"> 1010</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#a524f10cb8d6469c4f0594b084ec374a2">learn_with_metrics</a>(<a class="code" href="structlda.html">lda</a> &amp;l, <a class="code" href="structLEARNER_1_1learner.html">LEARNER::single_learner</a> &amp;base, <a class="code" href="structexample.html">example</a> &amp;ec)</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;{</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordflow">if</span> (l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#ac89895b3c3071cc384cda7902e2c0710">passes_complete</a> == 0)</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="comment">// build feature to example map</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    uint64_t <a class="code" href="stagewise__poly_8cc.html#a4fca0a9f0d667bbe422056d4c7153077">stride_shift</a> = l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#acfa565410aa0c9776d6c05552430fd7c">stride_shift</a>();</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    uint64_t weight_mask = l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#a417b307b1980e9744d7f2b94acd3a4b2">mask</a>();</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structfeatures.html">features</a> &amp;fs : ec)</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classfeatures__value__index__iterator.html">features::iterator</a> &amp;<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a> : fs)</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      {</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        uint64_t idx = (<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>.index() &amp; weight_mask) &gt;&gt; stride_shift;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        l.<a class="code" href="structlda.html#a65f43d081b827480376c1578d70b2790">feature_counts</a>[idx] += (uint32_t)<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>.value();</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        l.<a class="code" href="structlda.html#ac56acba6976cb3d26e9ecff8f9076ef9">feature_to_example_map</a>[idx].push_back(ec.example_counter);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    }</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  }</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <a class="code" href="lda__core_8cc.html#a22c730bc5c07c9cfffcf5c9c25a2b1ed">learn</a>(l, base, ec);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;}</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">// placeholder</span></div><div class="line"><a name="l01033"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a5b7522d16f2bcdb508ecc2549e5b7c45"> 1033</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#a5b7522d16f2bcdb508ecc2549e5b7c45">predict</a>(<a class="code" href="structlda.html">lda</a> &amp;l, <a class="code" href="structLEARNER_1_1learner.html">LEARNER::single_learner</a> &amp;base, <a class="code" href="structexample.html">example</a> &amp;ec) { <a class="code" href="lda__core_8cc.html#a22c730bc5c07c9cfffcf5c9c25a2b1ed">learn</a>(l, base, ec); }</div><div class="line"><a name="l01034"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#acc3c83f9b808541d59f4cb0f5dc73b26"> 1034</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#acc3c83f9b808541d59f4cb0f5dc73b26">predict_with_metrics</a>(<a class="code" href="structlda.html">lda</a> &amp;l, <a class="code" href="structLEARNER_1_1learner.html">LEARNER::single_learner</a> &amp;base, <a class="code" href="structexample.html">example</a> &amp;ec) { <a class="code" href="lda__core_8cc.html#a524f10cb8d6469c4f0594b084ec374a2">learn_with_metrics</a>(l, base, ec); }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"><a class="line" href="structword__doc__frequency.html"> 1036</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structword__doc__frequency.html">word_doc_frequency</a></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;{</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="comment">// feature/word index</span></div><div class="line"><a name="l01039"></a><span class="lineno"><a class="line" href="structword__doc__frequency.html#a4816100ef6b1169f2dde2b950cb132a6"> 1039</a></span>&#160;  uint64_t <a class="code" href="structword__doc__frequency.html#a4816100ef6b1169f2dde2b950cb132a6">idx</a>;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="comment">// document count</span></div><div class="line"><a name="l01041"></a><span class="lineno"><a class="line" href="structword__doc__frequency.html#aa58de8c648778ef26486ce76d3950835"> 1041</a></span>&#160;  uint32_t <a class="code" href="structword__doc__frequency.html#aa58de8c648778ef26486ce76d3950835">count</a>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;};</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">// cooccurence of 2 features/words</span></div><div class="line"><a name="l01045"></a><span class="lineno"><a class="line" href="structfeature__pair.html"> 1045</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfeature__pair.html">feature_pair</a></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;{</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="comment">// feature/word 1</span></div><div class="line"><a name="l01048"></a><span class="lineno"><a class="line" href="structfeature__pair.html#a35bd544448b65e7d211b87b414c6b28c"> 1048</a></span>&#160;  uint64_t <a class="code" href="structfeature__pair.html#a35bd544448b65e7d211b87b414c6b28c">f1</a>;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="comment">// feature/word 2</span></div><div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="structfeature__pair.html#a797684eab4de05f9f4f2fc76919cb0f9"> 1050</a></span>&#160;  uint64_t <a class="code" href="structfeature__pair.html#a797684eab4de05f9f4f2fc76919cb0f9">f2</a>;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"><a class="line" href="structfeature__pair.html#adb6aef90a639f0a7a4f9ffd2d8d67b5c"> 1052</a></span>&#160;  <a class="code" href="structfeature__pair.html#adb6aef90a639f0a7a4f9ffd2d8d67b5c">feature_pair</a>(uint64_t _f1, uint64_t _f2) : f1(_f1), f2(_f2) {}</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;};</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div><div class="line"><a name="l01056"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#ac2c33fd916d2249157be3879be665087"> 1056</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#ac2c33fd916d2249157be3879be665087">get_top_weights</a>(<a class="code" href="structvw.html">vw</a> *all, <span class="keywordtype">int</span> top_words_count, <span class="keywordtype">int</span> topic, std::vector&lt;feature&gt; &amp;output, T &amp;weights)</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;{</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  uint64_t length = (uint64_t)1 &lt;&lt; all-&gt;<a class="code" href="structvw.html#a01b6f14b593ea5a2fe5ae65dead97fab">num_bits</a>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="comment">// get top features for this topic</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespaceACTION__SCORE.html#a1ce55403f581514bdd318e5ef3bfdce8">cmp</a> = [](<a class="code" href="structfeature.html">feature</a> left, <a class="code" href="structfeature.html">feature</a> right) { <span class="keywordflow">return</span> left.<a class="code" href="structfeature.html#ae72c1b33aac82244c19ff232b8ced48a">x</a> &gt; right.<a class="code" href="structfeature.html#ae72c1b33aac82244c19ff232b8ced48a">x</a>; };</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  std::priority_queue&lt;feature, std::vector&lt;feature&gt;, decltype(<a class="code" href="namespaceACTION__SCORE.html#a1ce55403f581514bdd318e5ef3bfdce8">cmp</a>)&gt; top_features(<a class="code" href="namespaceACTION__SCORE.html#a1ce55403f581514bdd318e5ef3bfdce8">cmp</a>);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keyword">typename</span> T::iterator iter = weights.begin();</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; std::min(static_cast&lt;uint64_t&gt;(top_words_count), length); i++, ++iter)</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    top_features.push({(&amp;(*iter))[topic], iter.index()});</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="keywordflow">for</span> (uint64_t i = top_words_count; i &lt; length; i++, ++iter)</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> v = (&amp;(*iter))[topic];</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">if</span> (v &gt; top_features.top().x)</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      top_features.pop();</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      top_features.push({v, i});</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    }</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  }</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="comment">// extract idx and sort descending</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  output.resize(top_features.size());</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = (<span class="keywordtype">int</span>)top_features.size() - 1; i &gt;= 0; i--)</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    output[i] = top_features.top();</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    top_features.pop();</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"><a class="line" href="lda__core_8h.html#a5d5b64114c61772d3640b1b1f92a5204"> 1087</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#ac2c33fd916d2249157be3879be665087">get_top_weights</a>(<a class="code" href="structvw.html">vw</a> *all, <span class="keywordtype">int</span> top_words_count, <span class="keywordtype">int</span> topic, std::vector&lt;feature&gt; &amp;output)</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;{</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="keywordflow">if</span> (all-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#a83947face4285f451b42f9283ea127e8">sparse</a>)</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="lda__core_8cc.html#ac2c33fd916d2249157be3879be665087">get_top_weights</a>(all, top_words_count, topic, output, all-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#a276f4673850e9650c1360a78c9afab97">sparse_weights</a>);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="lda__core_8cc.html#ac2c33fd916d2249157be3879be665087">get_top_weights</a>(all, top_words_count, topic, output, all-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#aaac8b2f50c6d9ee2946d09c9183b4029">dense_weights</a>);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;}</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div><div class="line"><a name="l01096"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a3a1b40f103cff7a3e780d740b77eeaf2"> 1096</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#a3a1b40f103cff7a3e780d740b77eeaf2">compute_coherence_metrics</a>(<a class="code" href="structlda.html">lda</a> &amp;l, T &amp;weights)</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;{</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  uint64_t length = (uint64_t)1 &lt;&lt; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a01b6f14b593ea5a2fe5ae65dead97fab">num_bits</a>;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  std::vector&lt;std::vector&lt;feature_pair&gt;&gt; topics_word_pairs;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  topics_word_pairs.resize(l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="keywordtype">int</span> top_words_count = 10;  <span class="comment">// parameterize and check</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> topic = 0; topic &lt; l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>; topic++)</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  {</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="comment">// get top features for this topic</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespaceACTION__SCORE.html#a1ce55403f581514bdd318e5ef3bfdce8">cmp</a> = [](<a class="code" href="structfeature.html">feature</a> &amp;left, <a class="code" href="structfeature.html">feature</a> &amp;right) { <span class="keywordflow">return</span> left.<a class="code" href="structfeature.html#ae72c1b33aac82244c19ff232b8ced48a">x</a> &gt; right.x; };</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    std::priority_queue&lt;feature, std::vector&lt;feature&gt;, decltype(<a class="code" href="namespaceACTION__SCORE.html#a1ce55403f581514bdd318e5ef3bfdce8">cmp</a>)&gt; top_features(<a class="code" href="namespaceACTION__SCORE.html#a1ce55403f581514bdd318e5ef3bfdce8">cmp</a>);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keyword">typename</span> T::iterator iter = weights.begin();</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; std::min(static_cast&lt;uint64_t&gt;(top_words_count), length); i++, ++iter)</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      top_features.push(<a class="code" href="structfeature.html">feature</a>((&amp;(*iter))[topic], iter.index()));</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">typename</span> T::iterator v = weights.begin(); v != weights.end(); ++v)</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="keywordflow">if</span> ((&amp;(*v))[topic] &gt; top_features.top().x)</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        top_features.pop();</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        top_features.push(<a class="code" href="structfeature.html">feature</a>((&amp;(*v))[topic], v.index()));</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="comment">// extract idx and sort descending</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    std::vector&lt;uint64_t&gt; top_features_idx;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    top_features_idx.resize(top_features.size());</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = (<span class="keywordtype">int</span>)top_features.size() - 1; i &gt;= 0; i--)</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    {</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      top_features_idx[i] = top_features.top().weight_index;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      top_features.pop();</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    }</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keyword">auto</span> &amp;word_pairs = topics_word_pairs[topic];</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; top_features_idx.size(); i++)</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = i + 1; j &lt; top_features_idx.size(); j++)</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        word_pairs.emplace_back(top_features_idx[i], top_features_idx[j]);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  }</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="comment">// compress word pairs and create record for storing frequency</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  std::map&lt;uint64_t, std::vector&lt;word_doc_frequency&gt;&gt; coWordsDFSet;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;vec : topics_word_pairs)</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  {</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;wp : vec)</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="keyword">auto</span> f1 = wp.f1;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <span class="keyword">auto</span> f2 = wp.f2;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <span class="keyword">auto</span> wdf = coWordsDFSet.find(f1);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <span class="keywordflow">if</span> (wdf != coWordsDFSet.end())</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      {</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="comment">// http://stackoverflow.com/questions/5377434/does-stdmapiterator-return-a-copy-of-value-or-a-value-itself</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="comment">// if (wdf-&gt;second.find(f2) == wdf-&gt;second.end())</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="keywordflow">if</span> (std::find_if(wdf-&gt;second.begin(), wdf-&gt;second.end(),</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                [&amp;f2](<span class="keyword">const</span> <a class="code" href="structword__doc__frequency.html">word_doc_frequency</a> &amp;v) { <span class="keywordflow">return</span> v.idx == f2; }) != wdf-&gt;second.end())</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        {</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;          wdf-&gt;second.push_back({f2, 0});</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;          <span class="comment">// printf(&quot; add %d %d\n&quot;, f1, f2);</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      }</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        std::vector&lt;word_doc_frequency&gt; vec = {{f2, 0}};</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        coWordsDFSet.insert(std::make_pair(f1, vec));</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="comment">// printf(&quot; insert %d %d\n&quot;, f1, f2);</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      }</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// this.GetWordPairsDocumentFrequency(coWordsDFSet);</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;pair : coWordsDFSet)</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keyword">auto</span> &amp;examples_for_f1 = l.<a class="code" href="structlda.html#ac56acba6976cb3d26e9ecff8f9076ef9">feature_to_example_map</a>[pair.first];</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;wdf : pair.second)</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    {</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keyword">auto</span> &amp;examples_for_f2 = l.<a class="code" href="structlda.html#ac56acba6976cb3d26e9ecff8f9076ef9">feature_to_example_map</a>[wdf.idx];</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      <span class="comment">// assumes examples_for_f1 and examples_for_f2 are orderd</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      <span class="keywordtype">size_t</span> i = 0;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordtype">size_t</span> j = 0;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      <span class="keywordflow">while</span> (i &lt; examples_for_f1.size() &amp;&amp; j &lt; examples_for_f2.size())</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      {</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        <span class="keywordflow">if</span> (examples_for_f1[i] == examples_for_f2[j])</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        {</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;          wdf.count++;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;          i++;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;          j++;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        }</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (examples_for_f2[j] &lt; examples_for_f1[i])</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;          j++;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;          i++;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keywordtype">float</span> epsilon = 1e-6<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>;  <span class="comment">// TODO</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="keywordtype">float</span> avg_coherence = 0;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> topic = 0; topic &lt; l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>; topic++)</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordtype">float</span> coherence = 0;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;pairs : topics_word_pairs[topic])</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="keyword">auto</span> f1 = pairs.f1;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      <span class="keywordflow">if</span> (l.<a class="code" href="structlda.html#a65f43d081b827480376c1578d70b2790">feature_counts</a>[f1] == 0)</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keyword">auto</span> f2 = pairs.f2;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="keyword">auto</span> &amp;co_feature = coWordsDFSet[f1];</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      <span class="keyword">auto</span> co_feature_df = std::find_if(</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;          co_feature.begin(), co_feature.end(), [&amp;f2](<span class="keyword">const</span> <a class="code" href="structword__doc__frequency.html">word_doc_frequency</a> &amp;v) { <span class="keywordflow">return</span> v.idx == f2; });</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="keywordflow">if</span> (co_feature_df != co_feature.end())</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <span class="comment">// printf(&quot;(%d:%d + eps)/(%d:%d)\n&quot;, f2, co_feature_df-&gt;count, f1, l.feature_counts[f1]);</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        coherence += logf((co_feature_df-&gt;count + epsilon) / l.<a class="code" href="structlda.html#a65f43d081b827480376c1578d70b2790">feature_counts</a>[f1]);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      }</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    }</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    printf(<span class="stringliteral">&quot;Topic %3d coherence: %f\n&quot;</span>, (<span class="keywordtype">int</span>)topic, coherence);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="comment">// TODO: expose per topic coherence</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">// TODO: good vs. bad topics</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    avg_coherence += coherence;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  }</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  avg_coherence /= l.<a class="code" href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">topics</a>;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  printf(<span class="stringliteral">&quot;Avg topic coherence: %f\n&quot;</span>, avg_coherence);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;}</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#ae71041a44d8045546f1dc5f5fda44e4a"> 1231</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#a3a1b40f103cff7a3e780d740b77eeaf2">compute_coherence_metrics</a>(<a class="code" href="structlda.html">lda</a> &amp;l)</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;{</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keywordflow">if</span> (l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#a83947face4285f451b42f9283ea127e8">sparse</a>)</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <a class="code" href="lda__core_8cc.html#a3a1b40f103cff7a3e780d740b77eeaf2">compute_coherence_metrics</a>(l, l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#a276f4673850e9650c1360a78c9afab97">sparse_weights</a>);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <a class="code" href="lda__core_8cc.html#a3a1b40f103cff7a3e780d740b77eeaf2">compute_coherence_metrics</a>(l, l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#aaac8b2f50c6d9ee2946d09c9183b4029">dense_weights</a>);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a4b6039f4ea578f0cc8a148946d6526c1"> 1239</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#a4b6039f4ea578f0cc8a148946d6526c1">end_pass</a>(<a class="code" href="structlda.html">lda</a> &amp;l)</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;{</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keywordflow">if</span> (!l.<a class="code" href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">examples</a>.<a class="code" href="structv__array.html#a01916436cabbd621bf40731f78360550">empty</a>())</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="lda__core_8cc.html#ae803a6864f29306ef9775e7f0a28ded6">learn_batch</a>(l);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="keywordflow">if</span> (l.<a class="code" href="structlda.html#a16e668b407eaa62a2ca83bb03efb0dc3">compute_coherence_metrics</a> &amp;&amp; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#ac89895b3c3071cc384cda7902e2c0710">passes_complete</a> == l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#ad1f9eb87601ea231196182e3fce1a2a7">numpasses</a>)</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <a class="code" href="lda__core_8cc.html#a3a1b40f103cff7a3e780d740b77eeaf2">compute_coherence_metrics</a>(l);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="comment">// FASTPASS return;</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;}</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div><div class="line"><a name="l01252"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a4eaaf4274b7f8ec8e4f91ce541b1f83a"> 1252</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#a4eaaf4274b7f8ec8e4f91ce541b1f83a">end_examples</a>(<a class="code" href="structlda.html">lda</a> &amp;l, T &amp;weights)</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;{</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">typename</span> T::iterator iter = weights.begin(); iter != weights.end(); ++iter)</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  {</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordtype">float</span> decay_component =</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        l.<a class="code" href="structlda.html#a040db4ac52102609348b008125b76784">decay_levels</a>.<a class="code" href="structv__array.html#aaad3f3fbd9694eb40a85d9dd3e4959ce">last</a>() - l.<a class="code" href="structlda.html#a040db4ac52102609348b008125b76784">decay_levels</a>.<a class="code" href="structv__array.html#a1e8f3cf7ad69b05b38c016b09d85010d">end</a>()[(int)(-1 - l.<a class="code" href="structlda.html#ad0ed0ebccaf968c83a290c2e23175c7e">example_t</a> + (&amp;(*iter))[l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>])];</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordtype">float</span> decay = fmin(1.<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>, <a class="code" href="correctedMath_8h.html#a9c796fdb44524ba9db47d99c594e3519">correctedExp</a>(decay_component));</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <a class="code" href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a> *wp = &amp;(*iter);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a>; ++i) wp[i] *= decay;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;}</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div><div class="line"><a name="l01265"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a6b9bad9a075cdb8379f972483b442c03"> 1265</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="lda__core_8cc.html#a4eaaf4274b7f8ec8e4f91ce541b1f83a">end_examples</a>(<a class="code" href="structlda.html">lda</a> &amp;l)</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;{</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordflow">if</span> (l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#a83947face4285f451b42f9283ea127e8">sparse</a>)</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <a class="code" href="lda__core_8cc.html#a4eaaf4274b7f8ec8e4f91ce541b1f83a">end_examples</a>(l, l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#a276f4673850e9650c1360a78c9afab97">sparse_weights</a>);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <a class="code" href="lda__core_8cc.html#a4eaaf4274b7f8ec8e4f91ce541b1f83a">end_examples</a>(l, l.<a class="code" href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">all</a>-&gt;<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#aaac8b2f50c6d9ee2946d09c9183b4029">dense_weights</a>);</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;}</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div><div class="line"><a name="l01273"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a8c833d8533c08c660d0151160087d049"> 1273</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceVW.html#a67d2e194f1865809a14c8f3899497c4c">finish_example</a>(<a class="code" href="structvw.html">vw</a> &amp;, <a class="code" href="structlda.html">lda</a> &amp;, <a class="code" href="structexample.html">example</a> &amp;) {}</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"><a class="line" href="lda__core_8cc.html#a6b700dbc7f1f4305b026d8ccd8b8eb52"> 1275</a></span>&#160;std::istream &amp;<a class="code" href="lda__core_8cc.html#a6b700dbc7f1f4305b026d8ccd8b8eb52">operator&gt;&gt;</a>(std::istream &amp;in, <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088">lda_math_mode</a> &amp;mmode)</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;{</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  std::string token;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  in &gt;&gt; token;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;simd&quot;</span>)</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    mmode = <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492">USE_SIMD</a>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;accuracy&quot;</span> || token == <span class="stringliteral">&quot;precise&quot;</span>)</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    mmode = <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a218e5bceb2322cf88b9deba8d4a82695">USE_PRECISE</a>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;fast-approx&quot;</span> || token == <span class="stringliteral">&quot;approx&quot;</span>)</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    mmode = <a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a34bd64a6fd3602062b05d743ac770270">USE_FAST_APPROX</a>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="vw__exception_8h.html#ad50abb70f1329aeedfb472f419c37494">THROW_EX</a>(<a class="code" href="classVW_1_1vw__unrecognised__option__exception.html">VW::vw_unrecognised_option_exception</a>, token);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="keywordflow">return</span> in;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;}</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"><a class="line" href="lda__core_8h.html#af0c1f8d44e25e5c00f56edae9351b696"> 1290</a></span>&#160;<a class="code" href="structLEARNER_1_1learner.html">LEARNER::base_learner</a> *<a class="code" href="lda__core_8cc.html#aae549ae70ef5d0c66e58f83386077de3">lda_setup</a>(<a class="code" href="structVW_1_1config_1_1options__i.html">options_i</a> &amp;options, <a class="code" href="structvw.html">vw</a> &amp;all)</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;{</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="keyword">auto</span> ld = scoped_calloc_or_throw&lt;lda&gt;();</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <a class="code" href="structVW_1_1config_1_1option__group__definition.html">option_group_definition</a> new_options(<span class="stringliteral">&quot;Latent Dirichlet Allocation&quot;</span>);</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordtype">int</span> math_mode;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  new_options.add(<a class="code" href="namespaceVW_1_1config.html#ae768389a49d24d07215612b2f824d520">make_option</a>(<span class="stringliteral">&quot;lda&quot;</span>, ld-&gt;topics).keep().help(<span class="stringliteral">&quot;Run lda with &lt;int&gt; topics&quot;</span>))</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      .<a class="code" href="kernel__svm_8cc.html#a907b9ad55bf6f8e61a6385bc9599fc0f">add</a>(<a class="code" href="namespaceVW_1_1config.html#ae768389a49d24d07215612b2f824d520">make_option</a>(<span class="stringliteral">&quot;lda_alpha&quot;</span>, ld-&gt;lda_alpha)</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;               .keep()</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;               .default_value(0.1<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;               .help(<span class="stringliteral">&quot;Prior on sparsity of per-document topic weights&quot;</span>))</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      .<a class="code" href="kernel__svm_8cc.html#a907b9ad55bf6f8e61a6385bc9599fc0f">add</a>(<a class="code" href="namespaceVW_1_1config.html#ae768389a49d24d07215612b2f824d520">make_option</a>(<span class="stringliteral">&quot;lda_rho&quot;</span>, ld-&gt;lda_rho)</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;               .keep()</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;               .default_value(0.1<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;               .help(<span class="stringliteral">&quot;Prior on sparsity of topic distributions&quot;</span>))</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      .<a class="code" href="kernel__svm_8cc.html#a907b9ad55bf6f8e61a6385bc9599fc0f">add</a>(<a class="code" href="namespaceVW_1_1config.html#ae768389a49d24d07215612b2f824d520">make_option</a>(<span class="stringliteral">&quot;lda_D&quot;</span>, ld-&gt;lda_D).default_value(10000.0<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>).help(<span class="stringliteral">&quot;Number of documents&quot;</span>))</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      .<a class="code" href="kernel__svm_8cc.html#a907b9ad55bf6f8e61a6385bc9599fc0f">add</a>(<a class="code" href="namespaceVW_1_1config.html#ae768389a49d24d07215612b2f824d520">make_option</a>(<span class="stringliteral">&quot;lda_epsilon&quot;</span>, ld-&gt;lda_epsilon).default_value(0.001<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>).help(<span class="stringliteral">&quot;Loop convergence threshold&quot;</span>))</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      .<a class="code" href="kernel__svm_8cc.html#a907b9ad55bf6f8e61a6385bc9599fc0f">add</a>(<a class="code" href="namespaceVW_1_1config.html#ae768389a49d24d07215612b2f824d520">make_option</a>(<span class="stringliteral">&quot;minibatch&quot;</span>, ld-&gt;minibatch).default_value(1).help(<span class="stringliteral">&quot;Minibatch size, for LDA&quot;</span>))</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      .<a class="code" href="kernel__svm_8cc.html#a907b9ad55bf6f8e61a6385bc9599fc0f">add</a>(<a class="code" href="namespaceVW_1_1config.html#ae768389a49d24d07215612b2f824d520">make_option</a>(<span class="stringliteral">&quot;math-mode&quot;</span>, math_mode).default_value(<a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492">USE_SIMD</a>).help(<span class="stringliteral">&quot;Math mode: simd, accuracy, fast-approx&quot;</span>))</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      .<a class="code" href="kernel__svm_8cc.html#a907b9ad55bf6f8e61a6385bc9599fc0f">add</a>(<a class="code" href="namespaceVW_1_1config.html#ae768389a49d24d07215612b2f824d520">make_option</a>(<span class="stringliteral">&quot;metrics&quot;</span>, ld-&gt;compute_coherence_metrics).help(<span class="stringliteral">&quot;Compute metrics&quot;</span>));</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  options.<a class="code" href="structVW_1_1config_1_1options__i.html#a93c0de6c3ad57f6fb57441af2c908ba5">add_and_parse</a>(new_options);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="comment">// Convert from int to corresponding enum value.</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  ld-&gt;mmode = <span class="keyword">static_cast&lt;</span><a class="code" href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088">lda_math_mode</a><span class="keyword">&gt;</span>(math_mode);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="keywordflow">if</span> (!options.<a class="code" href="structVW_1_1config_1_1options__i.html#ab5171ac33158fca4580d3f0658c4929e">was_supplied</a>(<span class="stringliteral">&quot;lda&quot;</span>))</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a> = (uint32_t)ld-&gt;topics;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  all.<a class="code" href="structvw.html#ac2b0c04220c30a62a64a1ef9e4b115b0">delete_prediction</a> = <a class="code" href="example_8h.html#a450e49c6d5320e060391eaaf0c4ebd35">delete_scalars</a>;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  ld-&gt;sorted_features = std::vector&lt;index_feature&gt;();</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  ld-&gt;total_lambda_init = <span class="keyword">false</span>;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  ld-&gt;all = &amp;all;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  ld-&gt;example_t = all.<a class="code" href="structvw.html#a1bd6ce7ea965d9d809dd3cd99acb3a98">initial_t</a>;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">if</span> (ld-&gt;compute_coherence_metrics)</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  {</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    ld-&gt;feature_counts.resize((uint32_t)(<a class="code" href="crossplat__compat_8h.html#a409526622742cba7837fe43789181429">UINT64_ONE</a> &lt;&lt; all.<a class="code" href="structvw.html#a01b6f14b593ea5a2fe5ae65dead97fab">num_bits</a>));</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    ld-&gt;feature_to_example_map.resize((uint32_t)(<a class="code" href="crossplat__compat_8h.html#a409526622742cba7837fe43789181429">UINT64_ONE</a> &lt;&lt; all.<a class="code" href="structvw.html#a01b6f14b593ea5a2fe5ae65dead97fab">num_bits</a>));</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  }</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="keywordtype">float</span> temp = ceilf(logf((<span class="keywordtype">float</span>)(all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a> * 2 + 1)) / logf(2.<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>));</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  all.<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#acfa565410aa0c9776d6c05552430fd7c">stride_shift</a>((<span class="keywordtype">size_t</span>)temp);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  all.<a class="code" href="structvw.html#a05bba1784a89d36504b338811468359a">random_weights</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  all.<a class="code" href="structvw.html#aeb505400a0a7a55c9da48b36747e12c5">add_constant</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="keywordflow">if</span> (all.<a class="code" href="structvw.html#a939cbdaf20c78bfeabfddbf57c9d8250">eta</a> &gt; 1.)</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    std::cerr &lt;&lt; <span class="stringliteral">&quot;your learning rate is too high, setting it to 1&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    all.<a class="code" href="structvw.html#a939cbdaf20c78bfeabfddbf57c9d8250">eta</a> = std::min(all.<a class="code" href="structvw.html#a939cbdaf20c78bfeabfddbf57c9d8250">eta</a>, 1.f);</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="keywordtype">size_t</span> minibatch2 = <a class="code" href="lda__core_8cc.html#aa334f2ff33ee71bb2c308b6d96ee38c5">next_pow2</a>(ld-&gt;minibatch);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="keywordflow">if</span> (minibatch2 &gt; all.<a class="code" href="structvw.html#ab70afa2ceae01968d9d291c5c8b060be">p</a>-&gt;<a class="code" href="structparser.html#a8aa85c8ebd0bf6317c7296710c4d28be">ring_size</a>)</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordtype">bool</span> previous_strict_parse = all.<a class="code" href="structvw.html#ab70afa2ceae01968d9d291c5c8b060be">p</a>-&gt;<a class="code" href="structparser.html#aaaaa465f88b0b230c26509cdabc09a9f">strict_parse</a>;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keyword">delete</span> all.<a class="code" href="structvw.html#ab70afa2ceae01968d9d291c5c8b060be">p</a>;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    all.<a class="code" href="structvw.html#ab70afa2ceae01968d9d291c5c8b060be">p</a> = <span class="keyword">new</span> <a class="code" href="structparser.html">parser</a>{minibatch2, previous_strict_parse};</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    all.<a class="code" href="structvw.html#ab70afa2ceae01968d9d291c5c8b060be">p</a>-&gt;<a class="code" href="structparser.html#a29f98b675dc11176078222fccd8afeeb">_shared_data</a> = all.<a class="code" href="structvw.html#aada16c220b8d3eaf62aaee86168dde5e">sd</a>;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  ld-&gt;v.resize(all.<a class="code" href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">lda</a> * ld-&gt;minibatch);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  ld-&gt;decay_levels.push_back(0.<a class="code" href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>);</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  all.<a class="code" href="structvw.html#ab70afa2ceae01968d9d291c5c8b060be">p</a>-&gt;<a class="code" href="structparser.html#af15b434af656966700c94a50a92c4fcd">lp</a> = <a class="code" href="namespaceno__label.html#a39c874dbb1f3c89a76e050fc608e28b6">no_label::no_label_parser</a>;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <a class="code" href="structLEARNER_1_1learner.html">LEARNER::learner&lt;lda, example&gt;</a> &amp;l = <a class="code" href="namespaceLEARNER.html#a6a3dd62d10a87e9124f8ae65a2a7265a">init_learner</a>(ld, ld-&gt;compute_coherence_metrics ? <a class="code" href="lda__core_8cc.html#a524f10cb8d6469c4f0594b084ec374a2">learn_with_metrics</a> : <a class="code" href="lda__core_8cc.html#a22c730bc5c07c9cfffcf5c9c25a2b1ed">learn</a>,</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      ld-&gt;compute_coherence_metrics ? <a class="code" href="lda__core_8cc.html#acc3c83f9b808541d59f4cb0f5dc73b26">predict_with_metrics</a> : <a class="code" href="lda__core_8cc.html#a5b7522d16f2bcdb508ecc2549e5b7c45">predict</a>, <a class="code" href="crossplat__compat_8h.html#a409526622742cba7837fe43789181429">UINT64_ONE</a> &lt;&lt; all.<a class="code" href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">weights</a>.<a class="code" href="classparameters.html#acfa565410aa0c9776d6c05552430fd7c">stride_shift</a>(),</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      <a class="code" href="learner_8h.html#a5514b4a9448315c23ec344ca2d139e24a4f14d3acdc8c1cb2ac2f808f2afded32">prediction_type_t::scalars</a>);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  l.<a class="code" href="structLEARNER_1_1learner.html#a144e508faabaa6fb833330f678f350c1">set_save_load</a>(<a class="code" href="lda__core_8cc.html#af06105ab6103c75445b03e6aa2060dec">save_load</a>);</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  l.<a class="code" href="structLEARNER_1_1learner.html#a459cdbfe2232f11e6c73933961af97e1">set_finish_example</a>(<a class="code" href="namespaceVW.html#a67d2e194f1865809a14c8f3899497c4c">finish_example</a>);</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  l.<a class="code" href="structLEARNER_1_1learner.html#a30db946158a6fb5d8a8fb1b0da6d6756">set_end_examples</a>(<a class="code" href="lda__core_8cc.html#a4eaaf4274b7f8ec8e4f91ce541b1f83a">end_examples</a>);</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  l.<a class="code" href="structLEARNER_1_1learner.html#a5267864868d93658202276d6ecce0d8b">set_end_pass</a>(<a class="code" href="lda__core_8cc.html#a4b6039f4ea578f0cc8a148946d6526c1">end_pass</a>);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceLEARNER.html#abcf6bdc2fa5e38928c33212e20dbbd74">make_base</a>(l);</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;}</div><div class="ttc" id="structlda_html_aab6e3dd54339af2446bc8c679dcba314"><div class="ttname"><a href="structlda.html#aab6e3dd54339af2446bc8c679dcba314">lda::examples</a></div><div class="ttdeci">v_array&lt; example * &gt; examples</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00066">lda_core.cc:66</a></div></div>
<div class="ttc" id="classVW_1_1vw__unrecognised__option__exception_html"><div class="ttname"><a href="classVW_1_1vw__unrecognised__option__exception.html">VW::vw_unrecognised_option_exception</a></div><div class="ttdef"><b>Definition:</b> <a href="vw__exception_8h_source.html#l00088">vw_exception.h:88</a></div></div>
<div class="ttc" id="structlda_html_ac39ef81ca4320c193b2417226691c77d"><div class="ttname"><a href="structlda.html#ac39ef81ca4320c193b2417226691c77d">lda::doc_lengths</a></div><div class="ttdeci">v_array&lt; int &gt; doc_lengths</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00068">lda_core.cc:68</a></div></div>
<div class="ttc" id="structshared__data_html_aadcbe6fbce05c332e87da9aa517b439e"><div class="ttname"><a href="structshared__data.html#aadcbe6fbce05c332e87da9aa517b439e">shared_data::sum_loss</a></div><div class="ttdeci">double sum_loss</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00127">global_data.h:127</a></div></div>
<div class="ttc" id="namespaceldamath_html_ab8c3094ac92f432c36046a8b710b05c1"><div class="ttname"><a href="namespaceldamath.html#ab8c3094ac92f432c36046a8b710b05c1">ldamath::powf&lt; float, USE_SIMD &gt;</a></div><div class="ttdeci">float powf&lt; float, USE_SIMD &gt;(float x, float p)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00490">lda_core.cc:490</a></div></div>
<div class="ttc" id="structv__array_html_a4a32b45f55342a03095d74e7d4131ca3"><div class="ttname"><a href="structv__array.html#a4a32b45f55342a03095d74e7d4131ca3">v_array::resize</a></div><div class="ttdeci">void resize(size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="v__array_8h_source.html#l00067">v_array.h:67</a></div></div>
<div class="ttc" id="structexample_html_ae05e98faef8389156ebb6d8f823ca378"><div class="ttname"><a href="structexample.html#ae05e98faef8389156ebb6d8f823ca378">example::tag</a></div><div class="ttdeci">v_array&lt; char &gt; tag</div><div class="ttdef"><b>Definition:</b> <a href="example_8h_source.html#l00064">example.h:64</a></div></div>
<div class="ttc" id="structvw_html_ab73b9bae2e902cf1278e5a3f232832fc"><div class="ttname"><a href="structvw.html#ab73b9bae2e902cf1278e5a3f232832fc">vw::length</a></div><div class="ttdeci">size_t length()</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00507">global_data.h:507</a></div></div>
<div class="ttc" id="nn_8cc_html_a98f828fae7db78aa840c2e929da77daf"><div class="ttname"><a href="nn_8cc.html#a98f828fae7db78aa840c2e929da77daf">fastexp</a></div><div class="ttdeci">static float fastexp(float p)</div><div class="ttdef"><b>Definition:</b> <a href="nn_8cc_source.html#l00095">nn.cc:95</a></div></div>
<div class="ttc" id="lda__core_8cc_html_ae803a6864f29306ef9775e7f0a28ded6"><div class="ttname"><a href="lda__core_8cc.html#ae803a6864f29306ef9775e7f0a28ded6">learn_batch</a></div><div class="ttdeci">void learn_batch(lda &amp;l)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00857">lda_core.cc:857</a></div></div>
<div class="ttc" id="correctedMath_8h_html_a9c796fdb44524ba9db47d99c594e3519"><div class="ttname"><a href="correctedMath_8h.html#a9c796fdb44524ba9db47d99c594e3519">correctedExp</a></div><div class="ttdeci">#define correctedExp</div><div class="ttdef"><b>Definition:</b> <a href="correctedMath_8h_source.html#l00030">correctedMath.h:30</a></div></div>
<div class="ttc" id="structinitial__weights_html_aa138c35e8a2317f6e7320fc234418790"><div class="ttname"><a href="structinitial__weights.html#aa138c35e8a2317f6e7320fc234418790">initial_weights::_initial</a></div><div class="ttdeci">weight _initial</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00758">lda_core.cc:758</a></div></div>
<div class="ttc" id="vw__versions_8h_html_af95fe020b67c477c6e9fc931a1abc836"><div class="ttname"><a href="vw__versions_8h.html#af95fe020b67c477c6e9fc931a1abc836">VERSION_FILE_WITH_HEADER_ID</a></div><div class="ttdeci">#define VERSION_FILE_WITH_HEADER_ID</div><div class="ttdef"><b>Definition:</b> <a href="vw__versions_8h_source.html#l00017">vw_versions.h:17</a></div></div>
<div class="ttc" id="structvw_html_a8c84a43b76ba98653da4377ea827a5b4"><div class="ttname"><a href="structvw.html#a8c84a43b76ba98653da4377ea827a5b4">vw::weights</a></div><div class="ttdeci">parameters weights</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00535">global_data.h:535</a></div></div>
<div class="ttc" id="lda__core_8cc_html_a3a1b40f103cff7a3e780d740b77eeaf2"><div class="ttname"><a href="lda__core_8cc.html#a3a1b40f103cff7a3e780d740b77eeaf2">compute_coherence_metrics</a></div><div class="ttdeci">void compute_coherence_metrics(lda &amp;l, T &amp;weights)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01096">lda_core.cc:1096</a></div></div>
<div class="ttc" id="namespaceGD_html_afa9b5f6fb6d2a225eb250310bd4333cd"><div class="ttname"><a href="namespaceGD.html#afa9b5f6fb6d2a225eb250310bd4333cd">GD::print_audit_features</a></div><div class="ttdeci">void print_audit_features(vw &amp;all, example &amp;ec)</div><div class="ttdef"><b>Definition:</b> <a href="gd_8cc_source.html#l00323">gd.cc:323</a></div></div>
<div class="ttc" id="structlda_html_abf4130f3c19476d235616369349a7a03"><div class="ttname"><a href="structlda.html#abf4130f3c19476d235616369349a7a03">lda::minibatch</a></div><div class="ttdeci">size_t minibatch</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00060">lda_core.cc:60</a></div></div>
<div class="ttc" id="accumulate_8cc_html_a7fd3d396201d4eda43e2fc55bbe66814"><div class="ttname"><a href="accumulate_8cc.html#a7fd3d396201d4eda43e2fc55bbe66814">accumulate</a></div><div class="ttdeci">void accumulate(vw &amp;all, parameters &amp;weights, size_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="accumulate_8cc_source.html#l00018">accumulate.cc:18</a></div></div>
<div class="ttc" id="structlda_html_acbad9c7bed9b39d6232edf989e2568d1"><div class="ttname"><a href="structlda.html#acbad9c7bed9b39d6232edf989e2568d1">lda::total_lambda</a></div><div class="ttdeci">v_array&lt; float &gt; total_lambda</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00067">lda_core.cc:67</a></div></div>
<div class="ttc" id="structlda_html_a040db4ac52102609348b008125b76784"><div class="ttname"><a href="structlda.html#a040db4ac52102609348b008125b76784">lda::decay_levels</a></div><div class="ttdeci">v_array&lt; float &gt; decay_levels</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00064">lda_core.cc:64</a></div></div>
<div class="ttc" id="lda__core_8cc_html_a524f10cb8d6469c4f0594b084ec374a2"><div class="ttname"><a href="lda__core_8cc.html#a524f10cb8d6469c4f0594b084ec374a2">learn_with_metrics</a></div><div class="ttdeci">void learn_with_metrics(lda &amp;l, LEARNER::single_learner &amp;base, example &amp;ec)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01010">lda_core.cc:1010</a></div></div>
<div class="ttc" id="structvw_html_ac2b0c04220c30a62a64a1ef9e4b115b0"><div class="ttname"><a href="structvw.html#ac2b0c04220c30a62a64a1ef9e4b115b0">vw::delete_prediction</a></div><div class="ttdeci">void(* delete_prediction)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00479">global_data.h:479</a></div></div>
<div class="ttc" id="parse__regressor_8cc_html_ae98d6ec7706d1d12b3806b50908fc1b8"><div class="ttname"><a href="parse__regressor_8cc.html#ae98d6ec7706d1d12b3806b50908fc1b8">initialize_regressor</a></div><div class="ttdeci">void initialize_regressor(vw &amp;all, T &amp;weights)</div><div class="ttdef"><b>Definition:</b> <a href="parse__regressor_8cc_source.html#l00098">parse_regressor.cc:98</a></div></div>
<div class="ttc" id="namespaceldamath_html"><div class="ttname"><a href="namespaceldamath.html">ldamath</a></div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00118">lda_core.cc:118</a></div></div>
<div class="ttc" id="structlda_html_ac005d1b9f65fbf23cff5f0e6fcb89e28"><div class="ttname"><a href="structlda.html#ac005d1b9f65fbf23cff5f0e6fcb89e28">lda::powf</a></div><div class="ttdeci">float powf(float x, float p)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00574">lda_core.cc:574</a></div></div>
<div class="ttc" id="structfeature__pair_html_a797684eab4de05f9f4f2fc76919cb0f9"><div class="ttname"><a href="structfeature__pair.html#a797684eab4de05f9f4f2fc76919cb0f9">feature_pair::f2</a></div><div class="ttdeci">uint64_t f2</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01050">lda_core.cc:1050</a></div></div>
<div class="ttc" id="stagewise__poly_8cc_html_a4fca0a9f0d667bbe422056d4c7153077"><div class="ttname"><a href="stagewise__poly_8cc.html#a4fca0a9f0d667bbe422056d4c7153077">stride_shift</a></div><div class="ttdeci">uint64_t stride_shift(const stagewise_poly &amp;poly, uint64_t idx)</div><div class="ttdef"><b>Definition:</b> <a href="stagewise__poly_8cc_source.html#l00085">stagewise_poly.cc:85</a></div></div>
<div class="ttc" id="structfeature_html_ae72c1b33aac82244c19ff232b8ced48a"><div class="ttname"><a href="structfeature.html#ae72c1b33aac82244c19ff232b8ced48a">feature::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition:</b> <a href="feature__group_8h_source.html#l00028">feature_group.h:28</a></div></div>
<div class="ttc" id="structvw_html_a1bd6ce7ea965d9d809dd3cd99acb3a98"><div class="ttname"><a href="structvw.html#a1bd6ce7ea965d9d809dd3cd99acb3a98">vw::initial_t</a></div><div class="ttdeci">float initial_t</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00528">global_data.h:528</a></div></div>
<div class="ttc" id="namespaceMWT_html_a4e83e3de636837d39f1bb9c154f1fc9f"><div class="ttname"><a href="namespaceMWT.html#a4e83e3de636837d39f1bb9c154f1fc9f">MWT::print_scalars</a></div><div class="ttdeci">void print_scalars(int f, v_array&lt; float &gt; &amp;scalars, v_array&lt; char &gt; &amp;tag)</div><div class="ttdef"><b>Definition:</b> <a href="mwt_8cc_source.html#l00146">mwt.cc:146</a></div></div>
<div class="ttc" id="namespaceldamath_html_a450aae7b53d9356014a4732c2fbbe1bc"><div class="ttname"><a href="namespaceldamath.html#a450aae7b53d9356014a4732c2fbbe1bc">ldamath::expdigammify&lt; float, USE_SIMD &gt;</a></div><div class="ttdeci">void expdigammify&lt; float, USE_SIMD &gt;(vw &amp;all, float *gamma, float threshold, float)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00504">lda_core.cc:504</a></div></div>
<div class="ttc" id="structlda_html_ae28c7b718acaf201dbf738b5055db9f5"><div class="ttname"><a href="structlda.html#ae28c7b718acaf201dbf738b5055db9f5">lda::mmode</a></div><div class="ttdeci">lda_math_mode mmode</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00061">lda_core.cc:61</a></div></div>
<div class="ttc" id="namespaceldamath_html_a733cd0773e8c0725e3573bdab9d9dadd"><div class="ttname"><a href="namespaceldamath.html#a733cd0773e8c0725e3573bdab9d9dadd">ldamath::expdigammify_2</a></div><div class="ttdeci">void expdigammify_2(vw &amp;all, float *gamma, T *norm, const T threshold)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00515">lda_core.cc:515</a></div></div>
<div class="ttc" id="gd_8h_html"><div class="ttname"><a href="gd_8h.html">gd.h</a></div></div>
<div class="ttc" id="lda__core_8cc_html_ab0e72e7cb33469ee2e3dfc7905eaf088"><div class="ttname"><a href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088">lda_math_mode</a></div><div class="ttdeci">lda_math_mode</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00038">lda_core.cc:38</a></div></div>
<div class="ttc" id="namespaceldamath_html_a4b2e79ccc6ef2dbf8aaf22bc7eb20b1c"><div class="ttname"><a href="namespaceldamath.html#a4b2e79ccc6ef2dbf8aaf22bc7eb20b1c">ldamath::digamma&lt; float, USE_SIMD &gt;</a></div><div class="ttdeci">float digamma&lt; float, USE_SIMD &gt;(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00480">lda_core.cc:480</a></div></div>
<div class="ttc" id="structword__doc__frequency_html"><div class="ttname"><a href="structword__doc__frequency.html">word_doc_frequency</a></div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01036">lda_core.cc:1036</a></div></div>
<div class="ttc" id="structvw_html_aeb505400a0a7a55c9da48b36747e12c5"><div class="ttname"><a href="structvw.html#aeb505400a0a7a55c9da48b36747e12c5">vw::add_constant</a></div><div class="ttdeci">bool add_constant</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00490">global_data.h:490</a></div></div>
<div class="ttc" id="namespaceldamath_html_a3aa164f549ef2ac8cb475efa7fedaee0"><div class="ttname"><a href="namespaceldamath.html#a3aa164f549ef2ac8cb475efa7fedaee0">ldamath::lgamma&lt; float, USE_PRECISE &gt;</a></div><div class="ttdeci">float lgamma&lt; float, USE_PRECISE &gt;(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00429">lda_core.cc:429</a></div></div>
<div class="ttc" id="correctedMath_8h_html"><div class="ttname"><a href="correctedMath_8h.html">correctedMath.h</a></div></div>
<div class="ttc" id="namespaceldamath_html_aba4eaa43b8512e4b8660f7ac5cd80110"><div class="ttname"><a href="namespaceldamath.html#aba4eaa43b8512e4b8660f7ac5cd80110">ldamath::powf&lt; float, USE_PRECISE &gt;</a></div><div class="ttdeci">float powf&lt; float, USE_PRECISE &gt;(float x, float p)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00444">lda_core.cc:444</a></div></div>
<div class="ttc" id="structlda_html_ab9ff4429e8d145b8068a04dc8c61f572"><div class="ttname"><a href="structlda.html#ab9ff4429e8d145b8068a04dc8c61f572">lda::lda_rho</a></div><div class="ttdeci">float lda_rho</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00057">lda_core.cc:57</a></div></div>
<div class="ttc" id="structvw_html_a704c8131419ddb9518861b6b94bc0f0b"><div class="ttname"><a href="structvw.html#a704c8131419ddb9518861b6b94bc0f0b">vw::power_t</a></div><div class="ttdeci">float power_t</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00439">global_data.h:439</a></div></div>
<div class="ttc" id="structvw_html_a0e33c9d541494dd47ffb4e35c82fb982"><div class="ttname"><a href="structvw.html#a0e33c9d541494dd47ffb4e35c82fb982">vw::final_prediction_sink</a></div><div class="ttdeci">v_array&lt; int &gt; final_prediction_sink</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00512">global_data.h:512</a></div></div>
<div class="ttc" id="namespaceldamath_html_a5d76fa789ecc3c9eb7ee63a2c133851b"><div class="ttname"><a href="namespaceldamath.html#a5d76fa789ecc3c9eb7ee63a2c133851b">ldamath::fastdigamma</a></div><div class="ttdeci">float fastdigamma(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00165">lda_core.cc:165</a></div></div>
<div class="ttc" id="classparameters_html_a87a8ac5b3d13ff7241b84b2dc0088813"><div class="ttname"><a href="classparameters.html#a87a8ac5b3d13ff7241b84b2dc0088813">parameters::stride</a></div><div class="ttdeci">uint32_t stride()</div><div class="ttdef"><b>Definition:</b> <a href="array__parameters_8h_source.html#l00255">array_parameters.h:255</a></div></div>
<div class="ttc" id="structlda_html_ae2e67db02baa5881e842237072a9dd1f"><div class="ttname"><a href="structlda.html#ae2e67db02baa5881e842237072a9dd1f">lda::all</a></div><div class="ttdeci">vw * all</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00082">lda_core.cc:82</a></div></div>
<div class="ttc" id="structlda_html_a5eae5b0e981a13dd68408d07a8a31250"><div class="ttname"><a href="structlda.html#a5eae5b0e981a13dd68408d07a8a31250">lda::expdigammify_2</a></div><div class="ttdeci">void expdigammify_2(vw &amp;all, float *gamma, float *norm)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00613">lda_core.cc:613</a></div></div>
<div class="ttc" id="structfeatures_html"><div class="ttname"><a href="structfeatures.html">features</a></div><div class="ttdoc">the core definition of a set of features. </div><div class="ttdef"><b>Definition:</b> <a href="feature__group_8h_source.html#l00248">feature_group.h:248</a></div></div>
<div class="ttc" id="classdense__parameters_html_ab55da22b1a73b4f20e278c1084098918"><div class="ttname"><a href="classdense__parameters.html#ab55da22b1a73b4f20e278c1084098918">dense_parameters::set_default</a></div><div class="ttdeci">void set_default(R &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="array__parameters__dense_8h_source.html#l00095">array_parameters_dense.h:95</a></div></div>
<div class="ttc" id="namespaceldamath_html_ae12e8ccbfc4110b4be69b6e34ee0274b"><div class="ttname"><a href="namespaceldamath.html#ae12e8ccbfc4110b4be69b6e34ee0274b">ldamath::exponential&lt; float, USE_PRECISE &gt;</a></div><div class="ttdeci">float exponential&lt; float, USE_PRECISE &gt;(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00439">lda_core.cc:439</a></div></div>
<div class="ttc" id="lda__core_8cc_html_aae549ae70ef5d0c66e58f83386077de3"><div class="ttname"><a href="lda__core_8cc.html#aae549ae70ef5d0c66e58f83386077de3">lda_setup</a></div><div class="ttdeci">LEARNER::base_learner * lda_setup(options_i &amp;options, vw &amp;all)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01290">lda_core.cc:1290</a></div></div>
<div class="ttc" id="vw__exception_8h_html_ad50abb70f1329aeedfb472f419c37494"><div class="ttname"><a href="vw__exception_8h.html#ad50abb70f1329aeedfb472f419c37494">THROW_EX</a></div><div class="ttdeci">#define THROW_EX(ex, args)</div><div class="ttdef"><b>Definition:</b> <a href="vw__exception_8h_source.html#l00187">vw_exception.h:187</a></div></div>
<div class="ttc" id="namespaceLEARNER_html_abcf6bdc2fa5e38928c33212e20dbbd74"><div class="ttname"><a href="namespaceLEARNER.html#abcf6bdc2fa5e38928c33212e20dbbd74">LEARNER::make_base</a></div><div class="ttdeci">base_learner * make_base(learner&lt; T, E &gt; &amp;base)</div><div class="ttdef"><b>Definition:</b> <a href="learner_8h_source.html#l00458">learner.h:458</a></div></div>
<div class="ttc" id="structVW_1_1config_1_1option__group__definition_html"><div class="ttname"><a href="structVW_1_1config_1_1option__group__definition.html">VW::config::option_group_definition</a></div><div class="ttdef"><b>Definition:</b> <a href="options_8h_source.html#l00100">options.h:100</a></div></div>
<div class="ttc" id="lda__core_8cc_html_ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492"><div class="ttname"><a href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088ab9756eda236179723465652f20407492">USE_SIMD</a></div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00040">lda_core.cc:40</a></div></div>
<div class="ttc" id="namespaceldamath_html_a1ffa1f92dba7f9bcce42ceba5b82e1f0"><div class="ttname"><a href="namespaceldamath.html#a1ffa1f92dba7f9bcce42ceba5b82e1f0">ldamath::exponential</a></div><div class="ttdeci">T exponential(T)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00414">lda_core.cc:414</a></div></div>
<div class="ttc" id="lda__core_8cc_html_acc3c83f9b808541d59f4cb0f5dc73b26"><div class="ttname"><a href="lda__core_8cc.html#acc3c83f9b808541d59f4cb0f5dc73b26">predict_with_metrics</a></div><div class="ttdeci">void predict_with_metrics(lda &amp;l, LEARNER::single_learner &amp;base, example &amp;ec)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01034">lda_core.cc:1034</a></div></div>
<div class="ttc" id="namespaceldamath_html_af79dd4e0e3edcaa5f1f01ab27cc3b6db"><div class="ttname"><a href="namespaceldamath.html#af79dd4e0e3edcaa5f1f01ab27cc3b6db">ldamath::exponential&lt; float, USE_FAST_APPROX &gt;</a></div><div class="ttdeci">float exponential&lt; float, USE_FAST_APPROX &gt;(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00462">lda_core.cc:462</a></div></div>
<div class="ttc" id="array__parameters_8h_html"><div class="ttname"><a href="array__parameters_8h.html">array_parameters.h</a></div></div>
<div class="ttc" id="namespaceldamath_html_a990c36f9e61428f57e59ba8ec803a73d"><div class="ttname"><a href="namespaceldamath.html#a990c36f9e61428f57e59ba8ec803a73d">ldamath::exponential&lt; float, USE_SIMD &gt;</a></div><div class="ttdeci">float exponential&lt; float, USE_SIMD &gt;(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00485">lda_core.cc:485</a></div></div>
<div class="ttc" id="structVW_1_1config_1_1options__i_html_a93c0de6c3ad57f6fb57441af2c908ba5"><div class="ttname"><a href="structVW_1_1config_1_1options__i.html#a93c0de6c3ad57f6fb57441af2c908ba5">VW::config::options_i::add_and_parse</a></div><div class="ttdeci">virtual void add_and_parse(const option_group_definition &amp;group)=0</div></div>
<div class="ttc" id="structLEARNER_1_1learner_html_a144e508faabaa6fb833330f678f350c1"><div class="ttname"><a href="structLEARNER_1_1learner.html#a144e508faabaa6fb833330f678f350c1">LEARNER::learner::set_save_load</a></div><div class="ttdeci">void set_save_load(void(*sl)(T &amp;, io_buf &amp;, bool, bool))</div><div class="ttdef"><b>Definition:</b> <a href="learner_8h_source.html#l00253">learner.h:253</a></div></div>
<div class="ttc" id="structinitial__weights_html_ac928a0ba117c0ee0dfc9c610fbb5e394"><div class="ttname"><a href="structinitial__weights.html#ac928a0ba117c0ee0dfc9c610fbb5e394">initial_weights::_stride</a></div><div class="ttdeci">uint32_t _stride</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00762">lda_core.cc:762</a></div></div>
<div class="ttc" id="classsparse__parameters_html_a223ec5a32439fb79b2b026c952868424"><div class="ttname"><a href="classsparse__parameters.html#a223ec5a32439fb79b2b026c952868424">sparse_parameters::set_default</a></div><div class="ttdeci">void set_default(R &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="array__parameters_8h_source.html#l00174">array_parameters.h:174</a></div></div>
<div class="ttc" id="rand48_8cc_html_a64cab1594b4166e9442ee1429123044b"><div class="ttname"><a href="rand48_8cc.html#a64cab1594b4166e9442ee1429123044b">merand48</a></div><div class="ttdeci">float merand48(uint64_t &amp;initial)</div><div class="ttdef"><b>Definition:</b> <a href="rand48_8cc_source.html#l00020">rand48.cc:20</a></div></div>
<div class="ttc" id="mwt_8h_html"><div class="ttname"><a href="mwt_8h.html">mwt.h</a></div></div>
<div class="ttc" id="structlda_html_ad0ed0ebccaf968c83a290c2e23175c7e"><div class="ttname"><a href="structlda.html#ad0ed0ebccaf968c83a290c2e23175c7e">lda::example_t</a></div><div class="ttdeci">double example_t</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00081">lda_core.cc:81</a></div></div>
<div class="ttc" id="structinitial__weights_html_a1c832f1617a7f1e078854ac3f28a1e4d"><div class="ttname"><a href="structinitial__weights.html#a1c832f1617a7f1e078854ac3f28a1e4d">initial_weights::_random</a></div><div class="ttdeci">bool _random</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00760">lda_core.cc:760</a></div></div>
<div class="ttc" id="structvw_html_a90c1e35f2e7ad5988c0084c175f57d67"><div class="ttname"><a href="structvw.html#a90c1e35f2e7ad5988c0084c175f57d67">vw::holdout_set_off</a></div><div class="ttdeci">bool holdout_set_off</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00493">global_data.h:493</a></div></div>
<div class="ttc" id="namespaceanonymous__namespace_02lda__core_8cc_03_html_ac0aa65d0b3f9d90105048519869fd79c"><div class="ttname"><a href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ac0aa65d0b3f9d90105048519869fd79c">anonymous_namespace{lda_core.cc}::is_aligned16</a></div><div class="ttdeci">bool is_aligned16(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00108">lda_core.cc:108</a></div></div>
<div class="ttc" id="structLEARNER_1_1learner_html"><div class="ttname"><a href="structLEARNER_1_1learner.html">LEARNER::learner</a></div><div class="ttdef"><b>Definition:</b> <a href="cb__explore_8h_source.html#l00010">cb_explore.h:10</a></div></div>
<div class="ttc" id="structvw_html_a01b6f14b593ea5a2fe5ae65dead97fab"><div class="ttname"><a href="structvw.html#a01b6f14b593ea5a2fe5ae65dead97fab">vw::num_bits</a></div><div class="ttdeci">uint32_t num_bits</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00390">global_data.h:390</a></div></div>
<div class="ttc" id="structv__array_html_af6abe7aa57bda75f23da3a4d4f6ba185"><div class="ttname"><a href="structv__array.html#af6abe7aa57bda75f23da3a4d4f6ba185">v_array::begin</a></div><div class="ttdeci">T *&amp; begin()</div><div class="ttdef"><b>Definition:</b> <a href="v__array_8h_source.html#l00040">v_array.h:40</a></div></div>
<div class="ttc" id="structfeature_html_a0a02b4c4c785a3ee3f8f1503ef7e4616"><div class="ttname"><a href="structfeature.html#a0a02b4c4c785a3ee3f8f1503ef7e4616">feature::weight_index</a></div><div class="ttdeci">uint64_t weight_index</div><div class="ttdef"><b>Definition:</b> <a href="feature__group_8h_source.html#l00029">feature_group.h:29</a></div></div>
<div class="ttc" id="classindex__feature_html_a43948d814e4512f5ccf64b1272808d6c"><div class="ttname"><a href="classindex__feature.html#a43948d814e4512f5ccf64b1272808d6c">index_feature::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const index_feature b) const </div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00050">lda_core.cc:50</a></div></div>
<div class="ttc" id="structvw_html_ab7b7f1e764da852d44b5e900fa991d95"><div class="ttname"><a href="structvw.html#ab7b7f1e764da852d44b5e900fa991d95">vw::progress_add</a></div><div class="ttdeci">bool progress_add</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00543">global_data.h:543</a></div></div>
<div class="ttc" id="structparser_html_aaaaa465f88b0b230c26509cdabc09a9f"><div class="ttname"><a href="structparser.html#aaaaa465f88b0b230c26509cdabc09a9f">parser::strict_parse</a></div><div class="ttdeci">bool strict_parse</div><div class="ttdef"><b>Definition:</b> <a href="parser_8h_source.html#l00118">parser.h:118</a></div></div>
<div class="ttc" id="structvw_html_a6f3a5a390dca7aeac4ab2116bcc3f8a8"><div class="ttname"><a href="structvw.html#a6f3a5a390dca7aeac4ab2116bcc3f8a8">vw::logger</a></div><div class="ttdeci">vw_logger logger</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00480">global_data.h:480</a></div></div>
<div class="ttc" id="namespaceanonymous__namespace_02lda__core_8cc_03_html_afeee03b7050e140fdac14420095a535c"><div class="ttname"><a href="namespaceanonymous__namespace_02lda__core_8cc_03.html#afeee03b7050e140fdac14420095a535c">anonymous_namespace{lda_core.cc}::new_gamma</a></div><div class="ttdeci">v_array&lt; float &gt; new_gamma</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00680">lda_core.cc:680</a></div></div>
<div class="ttc" id="lda__core_8cc_html_a8e4a755a1fe7e8c811372e614fce7f85"><div class="ttname"><a href="lda__core_8cc.html#a8e4a755a1fe7e8c811372e614fce7f85">return_example</a></div><div class="ttdeci">void return_example(vw &amp;all, example &amp;ec)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00846">lda_core.cc:846</a></div></div>
<div class="ttc" id="vw__versions_8h_html"><div class="ttname"><a href="vw__versions_8h.html">vw_versions.h</a></div></div>
<div class="ttc" id="no__label_8h_html"><div class="ttname"><a href="no__label_8h.html">no_label.h</a></div></div>
<div class="ttc" id="vw__exception_8h_html"><div class="ttname"><a href="vw__exception_8h.html">vw_exception.h</a></div></div>
<div class="ttc" id="structlda_html_a526d03cdba0f11c46aa429211c5b9c8a"><div class="ttname"><a href="structlda.html#a526d03cdba0f11c46aa429211c5b9c8a">lda::lda_epsilon</a></div><div class="ttdeci">float lda_epsilon</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00059">lda_core.cc:59</a></div></div>
<div class="ttc" id="structvw_html"><div class="ttname"><a href="structvw.html">vw</a></div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00359">global_data.h:359</a></div></div>
<div class="ttc" id="structshared__data_html_ac170e7cf74cd37469fab0ea76bf19ff5"><div class="ttname"><a href="structshared__data.html#ac170e7cf74cd37469fab0ea76bf19ff5">shared_data::sum_loss_since_last_dump</a></div><div class="ttdeci">double sum_loss_since_last_dump</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00128">global_data.h:128</a></div></div>
<div class="ttc" id="structvw_html_ab70afa2ceae01968d9d291c5c8b060be"><div class="ttname"><a href="structvw.html#ab70afa2ceae01968d9d291c5c8b060be">vw::p</a></div><div class="ttdeci">parser * p</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00367">global_data.h:367</a></div></div>
<div class="ttc" id="structvw_html_a64bc066c8b21fa67a5a7b2700fb9160b"><div class="ttname"><a href="structvw.html#a64bc066c8b21fa67a5a7b2700fb9160b">vw::lda</a></div><div class="ttdeci">uint32_t lda</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00502">global_data.h:502</a></div></div>
<div class="ttc" id="lda__core_8cc_html_aa334f2ff33ee71bb2c308b6d96ee38c5"><div class="ttname"><a href="lda__core_8cc.html#aa334f2ff33ee71bb2c308b6d96ee38c5">next_pow2</a></div><div class="ttdeci">size_t next_pow2(size_t x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00744">lda_core.cc:744</a></div></div>
<div class="ttc" id="structlda_html_a8d0abbade8cb98e286e97de1eb5d3d60"><div class="ttname"><a href="structlda.html#a8d0abbade8cb98e286e97de1eb5d3d60">lda::lgamma</a></div><div class="ttdeci">float lgamma(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00554">lda_core.cc:554</a></div></div>
<div class="ttc" id="namespaceldamath_html_a0ed1e91e6046a0ff520540808ba16897"><div class="ttname"><a href="namespaceldamath.html#a0ed1e91e6046a0ff520540808ba16897">ldamath::digamma&lt; float, USE_PRECISE &gt;</a></div><div class="ttdeci">float digamma&lt; float, USE_PRECISE &gt;(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00434">lda_core.cc:434</a></div></div>
<div class="ttc" id="structLEARNER_1_1learner_html_a459cdbfe2232f11e6c73933961af97e1"><div class="ttname"><a href="structLEARNER_1_1learner.html#a459cdbfe2232f11e6c73933961af97e1">LEARNER::learner::set_finish_example</a></div><div class="ttdeci">void set_finish_example(void(*f)(vw &amp;all, T &amp;, E &amp;))</div><div class="ttdef"><b>Definition:</b> <a href="learner_8h_source.html#l00303">learner.h:303</a></div></div>
<div class="ttc" id="structlda_html_a3a96e670640968e073731102bf224ff3"><div class="ttname"><a href="structlda.html#a3a96e670640968e073731102bf224ff3">lda::lda_alpha</a></div><div class="ttdeci">float lda_alpha</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00056">lda_core.cc:56</a></div></div>
<div class="ttc" id="structword__doc__frequency_html_a4816100ef6b1169f2dde2b950cb132a6"><div class="ttname"><a href="structword__doc__frequency.html#a4816100ef6b1169f2dde2b950cb132a6">word_doc_frequency::idx</a></div><div class="ttdeci">uint64_t idx</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01039">lda_core.cc:1039</a></div></div>
<div class="ttc" id="namespaceldamath_html_a6f0fd6438f25c9c987668db93d1e17f3"><div class="ttname"><a href="namespaceldamath.html#a6f0fd6438f25c9c987668db93d1e17f3">ldamath::powf&lt; float, USE_FAST_APPROX &gt;</a></div><div class="ttdeci">float powf&lt; float, USE_FAST_APPROX &gt;(float x, float p)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00467">lda_core.cc:467</a></div></div>
<div class="ttc" id="namespaceldamath_html_a3e35e02ec1179cccb17b381adef054f3"><div class="ttname"><a href="namespaceldamath.html#a3e35e02ec1179cccb17b381adef054f3">ldamath::lgamma&lt; float, USE_FAST_APPROX &gt;</a></div><div class="ttdeci">float lgamma&lt; float, USE_FAST_APPROX &gt;(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00452">lda_core.cc:452</a></div></div>
<div class="ttc" id="namespaceldamath_html_a4a66173455220f7c16a9ccd95a1a404d"><div class="ttname"><a href="namespaceldamath.html#a4a66173455220f7c16a9ccd95a1a404d">ldamath::lgamma&lt; float, USE_SIMD &gt;</a></div><div class="ttdeci">float lgamma&lt; float, USE_SIMD &gt;(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00475">lda_core.cc:475</a></div></div>
<div class="ttc" id="structinitial__weights_html_affdce96db46a11930133fe2294b19a58"><div class="ttname"><a href="structinitial__weights.html#affdce96db46a11930133fe2294b19a58">initial_weights::initial_weights</a></div><div class="ttdeci">initial_weights(weight initial, weight initial_random, bool random, uint32_t lda, uint32_t stride)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00763">lda_core.cc:763</a></div></div>
<div class="ttc" id="structlda_html_af86142c45e95f4c4979e8e5e62aefaf4"><div class="ttname"><a href="structlda.html#af86142c45e95f4c4979e8e5e62aefaf4">lda::Elogtheta</a></div><div class="ttdeci">v_array&lt; float &gt; Elogtheta</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00063">lda_core.cc:63</a></div></div>
<div class="ttc" id="lda__core_8cc_html_ab0e72e7cb33469ee2e3dfc7905eaf088a218e5bceb2322cf88b9deba8d4a82695"><div class="ttname"><a href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a218e5bceb2322cf88b9deba8d4a82695">USE_PRECISE</a></div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00041">lda_core.cc:41</a></div></div>
<div class="ttc" id="structv__array_html_afd6a4614f027ac5f786507552ce13f13"><div class="ttname"><a href="structv__array.html#afd6a4614f027ac5f786507552ce13f13">v_array::push_back</a></div><div class="ttdeci">void push_back(const T &amp;new_ele)</div><div class="ttdef"><b>Definition:</b> <a href="v__array_8h_source.html#l00105">v_array.h:105</a></div></div>
<div class="ttc" id="classparameters_html"><div class="ttname"><a href="classparameters.html">parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="array__parameters_8h_source.html#l00229">array_parameters.h:229</a></div></div>
<div class="ttc" id="structvw_html_aada16c220b8d3eaf62aaee86168dde5e"><div class="ttname"><a href="structvw.html#aada16c220b8d3eaf62aaee86168dde5e">vw::sd</a></div><div class="ttdeci">shared_data * sd</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00365">global_data.h:365</a></div></div>
<div class="ttc" id="namespaceldamath_html_a3334ba50925c47fb99d4ae6e37f786c9"><div class="ttname"><a href="namespaceldamath.html#a3334ba50925c47fb99d4ae6e37f786c9">ldamath::powf</a></div><div class="ttdeci">T powf(T, T)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00421">lda_core.cc:421</a></div></div>
<div class="ttc" id="namespaceSearch_html_a17d4f427c69b48a8673c621a403dca30"><div class="ttname"><a href="namespaceSearch.html#a17d4f427c69b48a8673c621a403dca30">Search::random</a></div><div class="ttdeci">size_t random(std::shared_ptr&lt; rand_state &gt; &amp;rs, size_t max)</div><div class="ttdef"><b>Definition:</b> <a href="search_8cc_source.html#l00776">search.cc:776</a></div></div>
<div class="ttc" id="namespaceldamath_html_a9fe0220b67d6189f202bcd955946faca"><div class="ttname"><a href="namespaceldamath.html#a9fe0220b67d6189f202bcd955946faca">ldamath::fastlgamma</a></div><div class="ttdeci">float fastlgamma(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00157">lda_core.cc:157</a></div></div>
<div class="ttc" id="structword__doc__frequency_html_aa58de8c648778ef26486ce76d3950835"><div class="ttname"><a href="structword__doc__frequency.html#aa58de8c648778ef26486ce76d3950835">word_doc_frequency::count</a></div><div class="ttdeci">uint32_t count</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01041">lda_core.cc:1041</a></div></div>
<div class="ttc" id="structvw_html_aef7628e009ca4bfa6a5caf4ffcfd4fb5"><div class="ttname"><a href="structvw.html#aef7628e009ca4bfa6a5caf4ffcfd4fb5">vw::model_file_ver</a></div><div class="ttdeci">VW::version_struct model_file_ver</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00411">global_data.h:411</a></div></div>
<div class="ttc" id="structvw_html_a33eefadb9fb5b904e8454a4c864f47a3"><div class="ttname"><a href="structvw.html#a33eefadb9fb5b904e8454a4c864f47a3">vw::progress_arg</a></div><div class="ttdeci">float progress_arg</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00544">global_data.h:544</a></div></div>
<div class="ttc" id="lda__core_8cc_html_a919b85398291ef989b7a29a3fa353ae3"><div class="ttname"><a href="lda__core_8cc.html#a919b85398291ef989b7a29a3fa353ae3">lda_loop</a></div><div class="ttdeci">float lda_loop(lda &amp;l, v_array&lt; float &gt; &amp;Elogtheta, float *v, example *ec, float)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00689">lda_core.cc:689</a></div></div>
<div class="ttc" id="structlda_html_a63e56d9031626e4d0e3871869a975fd9"><div class="ttname"><a href="structlda.html#a63e56d9031626e4d0e3871869a975fd9">lda::lda_D</a></div><div class="ttdeci">float lda_D</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00058">lda_core.cc:58</a></div></div>
<div class="ttc" id="structparser_html_a29f98b675dc11176078222fccd8afeeb"><div class="ttname"><a href="structparser.html#a29f98b675dc11176078222fccd8afeeb">parser::_shared_data</a></div><div class="ttdeci">shared_data * _shared_data</div><div class="ttdef"><b>Definition:</b> <a href="parser_8h_source.html#l00081">parser.h:81</a></div></div>
<div class="ttc" id="example_8h_html_a450e49c6d5320e060391eaaf0c4ebd35"><div class="ttname"><a href="example_8h.html#a450e49c6d5320e060391eaaf0c4ebd35">delete_scalars</a></div><div class="ttdeci">void delete_scalars(void *v)</div><div class="ttdef"><b>Definition:</b> <a href="example_8h_source.html#l00037">example.h:37</a></div></div>
<div class="ttc" id="classio__buf_html_a2126363251fc091d8ed2356b7c50f551"><div class="ttname"><a href="classio__buf.html#a2126363251fc091d8ed2356b7c50f551">io_buf::files</a></div><div class="ttdeci">v_array&lt; int &gt; files</div><div class="ttdef"><b>Definition:</b> <a href="io__buf_8h_source.html#l00062">io_buf.h:62</a></div></div>
<div class="ttc" id="structv__array_html_aab10f7f1ac8ad24a8dc0b112fed415ef"><div class="ttname"><a href="structv__array.html#aab10f7f1ac8ad24a8dc0b112fed415ef">v_array::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="v__array_8h_source.html#l00086">v_array.h:86</a></div></div>
<div class="ttc" id="structvw__logger_html_acc133e9fe5e6ab548f36a8d4dc0a85b0"><div class="ttname"><a href="structvw__logger.html#acc133e9fe5e6ab548f36a8d4dc0a85b0">vw_logger::quiet</a></div><div class="ttdeci">bool quiet</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00349">global_data.h:349</a></div></div>
<div class="ttc" id="structlda_html_ad6b9c1322926937e7550646ec34869c2"><div class="ttname"><a href="structlda.html#ad6b9c1322926937e7550646ec34869c2">lda::~lda</a></div><div class="ttdeci">~lda()</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00091">lda_core.cc:91</a></div></div>
<div class="ttc" id="structshared__data_html_a98f490723d23eacc5e3378526669e0c3"><div class="ttname"><a href="structshared__data.html#a98f490723d23eacc5e3378526669e0c3">shared_data::print_update</a></div><div class="ttdeci">void print_update(bool holdout_set_off, size_t current_pass, float label, float prediction, size_t num_features, bool progress_add, float progress_arg)</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00207">global_data.h:207</a></div></div>
<div class="ttc" id="learner_8h_html_a5514b4a9448315c23ec344ca2d139e24a4f14d3acdc8c1cb2ac2f808f2afded32"><div class="ttname"><a href="learner_8h.html#a5514b4a9448315c23ec344ca2d139e24a4f14d3acdc8c1cb2ac2f808f2afded32">prediction_type_t::scalars</a></div></div>
<div class="ttc" id="structexample_html_a35f3ec2680a21f971548cf5bb9f1fda0"><div class="ttname"><a href="structexample.html#a35f3ec2680a21f971548cf5bb9f1fda0">example::num_features</a></div><div class="ttdeci">size_t num_features</div><div class="ttdef"><b>Definition:</b> <a href="example_8h_source.html#l00068">example.h:68</a></div></div>
<div class="ttc" id="structVW_1_1config_1_1options__i_html_ab5171ac33158fca4580d3f0658c4929e"><div class="ttname"><a href="structVW_1_1config_1_1options__i.html#ab5171ac33158fca4580d3f0658c4929e">VW::config::options_i::was_supplied</a></div><div class="ttdeci">virtual bool was_supplied(const std::string &amp;key)=0</div></div>
<div class="ttc" id="namespaceldamath_html_a9b52d8c7b67495e6c4cb51a25b5144b2"><div class="ttname"><a href="namespaceldamath.html#a9b52d8c7b67495e6c4cb51a25b5144b2">ldamath::fastlog2</a></div><div class="ttdeci">float fastlog2(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00120">lda_core.cc:120</a></div></div>
<div class="ttc" id="namespaceSearch_html_ab2e1382e823e42ee5e13b33f9653a8ce"><div class="ttname"><a href="namespaceSearch.html#ab2e1382e823e42ee5e13b33f9653a8ce">Search::absdiff</a></div><div class="ttdeci">size_t absdiff(size_t a, size_t b)</div><div class="ttdef"><b>Definition:</b> <a href="search_8cc_source.html#l01957">search.cc:1957</a></div></div>
<div class="ttc" id="namespaceldamath_html_afd6ccb9dd46a539bfbc4c3403ea1ab66"><div class="ttname"><a href="namespaceldamath.html#afd6ccb9dd46a539bfbc4c3403ea1ab66">ldamath::expdigammify_2&lt; float, USE_SIMD &gt;</a></div><div class="ttdeci">void expdigammify_2&lt; float, USE_SIMD &gt;(vw &amp;all, float *gamma, float *norm, const float threshold)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00521">lda_core.cc:521</a></div></div>
<div class="ttc" id="lda__core_8cc_html_abd2a910d6de296d1b242ac1c672c8018"><div class="ttname"><a href="lda__core_8cc.html#abd2a910d6de296d1b242ac1c672c8018">theta_kl</a></div><div class="ttdeci">float theta_kl(lda &amp;l, v_array&lt; float &gt; &amp;Elogtheta, float *gamma)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00649">lda_core.cc:649</a></div></div>
<div class="ttc" id="structVW_1_1config_1_1options__i_html"><div class="ttname"><a href="structVW_1_1config_1_1options__i.html">VW::config::options_i</a></div><div class="ttdef"><b>Definition:</b> <a href="options_8h_source.html#l00122">options.h:122</a></div></div>
<div class="ttc" id="rand48_8h_html"><div class="ttname"><a href="rand48_8h.html">rand48.h</a></div></div>
<div class="ttc" id="structvw_html_a05bba1784a89d36504b338811468359a"><div class="ttname"><a href="structvw.html#a05bba1784a89d36504b338811468359a">vw::random_weights</a></div><div class="ttdeci">bool random_weights</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00486">global_data.h:486</a></div></div>
<div class="ttc" id="structlda_html_a65f43d081b827480376c1578d70b2790"><div class="ttname"><a href="structlda.html#a65f43d081b827480376c1578d70b2790">lda::feature_counts</a></div><div class="ttdeci">std::vector&lt; uint32_t &gt; feature_counts</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00076">lda_core.cc:76</a></div></div>
<div class="ttc" id="lda__core_8cc_html_ab0e72e7cb33469ee2e3dfc7905eaf088a34bd64a6fd3602062b05d743ac770270"><div class="ttname"><a href="lda__core_8cc.html#ab0e72e7cb33469ee2e3dfc7905eaf088a34bd64a6fd3602062b05d743ac770270">USE_FAST_APPROX</a></div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00042">lda_core.cc:42</a></div></div>
<div class="ttc" id="classparameters_html_aaac8b2f50c6d9ee2946d09c9183b4029"><div class="ttname"><a href="classparameters.html#aaac8b2f50c6d9ee2946d09c9183b4029">parameters::dense_weights</a></div><div class="ttdeci">dense_parameters dense_weights</div><div class="ttdef"><b>Definition:</b> <a href="array__parameters_8h_source.html#l00236">array_parameters.h:236</a></div></div>
<div class="ttc" id="structlda_html_ac56acba6976cb3d26e9ecff8f9076ef9"><div class="ttname"><a href="structlda.html#ac56acba6976cb3d26e9ecff8f9076ef9">lda::feature_to_example_map</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; size_t &gt; &gt; feature_to_example_map</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00077">lda_core.cc:77</a></div></div>
<div class="ttc" id="structexample_html"><div class="ttname"><a href="structexample.html">example</a></div><div class="ttdef"><b>Definition:</b> <a href="example_8h_source.html#l00055">example.h:55</a></div></div>
<div class="ttc" id="namespaceldamath_html_a7144c84a42e3fd2894f751008c4e8fcf"><div class="ttname"><a href="namespaceldamath.html#a7144c84a42e3fd2894f751008c4e8fcf">ldamath::fastpow</a></div><div class="ttdeci">float fastpow(float x, float p)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00155">lda_core.cc:155</a></div></div>
<div class="ttc" id="structvw_html_a1f68b6894ba36213ed87a7e2a68d5d4c"><div class="ttname"><a href="structvw.html#a1f68b6894ba36213ed87a7e2a68d5d4c">vw::current_pass</a></div><div class="ttdeci">uint64_t current_pass</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00388">global_data.h:388</a></div></div>
<div class="ttc" id="classparameters_html_af0e5e373c537634e67391d7f75675498"><div class="ttname"><a href="classparameters.html#af0e5e373c537634e67391d7f75675498">parameters::strided_index</a></div><div class="ttdeci">weight &amp; strided_index(size_t index)</div><div class="ttdef"><b>Definition:</b> <a href="array__parameters_8h_source.html#l00314">array_parameters.h:314</a></div></div>
<div class="ttc" id="structlda_html_a16e668b407eaa62a2ca83bb03efb0dc3"><div class="ttname"><a href="structlda.html#a16e668b407eaa62a2ca83bb03efb0dc3">lda::compute_coherence_metrics</a></div><div class="ttdeci">bool compute_coherence_metrics</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00073">lda_core.cc:73</a></div></div>
<div class="ttc" id="classset__initial__lda__wrapper_html_a488d7f2be96f4b040327ab30cbb57074"><div class="ttname"><a href="classset__initial__lda__wrapper.html#a488d7f2be96f4b040327ab30cbb57074">set_initial_lda_wrapper::func</a></div><div class="ttdeci">static void func(weight &amp;w, initial_weights &amp;iw, uint64_t index)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00773">lda_core.cc:773</a></div></div>
<div class="ttc" id="structparser_html_a8aa85c8ebd0bf6317c7296710c4d28be"><div class="ttname"><a href="structparser.html#a8aa85c8ebd0bf6317c7296710c4d28be">parser::ring_size</a></div><div class="ttdeci">const size_t ring_size</div><div class="ttdef"><b>Definition:</b> <a href="parser_8h_source.html#l00090">parser.h:90</a></div></div>
<div class="ttc" id="classio__buf_html"><div class="ttname"><a href="classio__buf.html">io_buf</a></div><div class="ttdef"><b>Definition:</b> <a href="io__buf_8h_source.html#l00052">io_buf.h:52</a></div></div>
<div class="ttc" id="lda__core_8cc_html_a22c730bc5c07c9cfffcf5c9c25a2b1ed"><div class="ttname"><a href="lda__core_8cc.html#a22c730bc5c07c9cfffcf5c9c25a2b1ed">learn</a></div><div class="ttdeci">void learn(lda &amp;l, LEARNER::single_learner &amp;, example &amp;ec)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00992">lda_core.cc:992</a></div></div>
<div class="ttc" id="namespaceldamath_html_abcc73ee6f2731b8d66dca96a6bea164c"><div class="ttname"><a href="namespaceldamath.html#abcc73ee6f2731b8d66dca96a6bea164c">ldamath::expdigammify</a></div><div class="ttdeci">void expdigammify(vw &amp;all, T *gamma, T threshold, T initial)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00496">lda_core.cc:496</a></div></div>
<div class="ttc" id="namespaceVW_html_a67d2e194f1865809a14c8f3899497c4c"><div class="ttname"><a href="namespaceVW.html#a67d2e194f1865809a14c8f3899497c4c">VW::finish_example</a></div><div class="ttdeci">void finish_example(vw &amp;, example &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="parser_8cc_source.html#l00918">parser.cc:918</a></div></div>
<div class="ttc" id="reductions_8h_html"><div class="ttname"><a href="reductions_8h.html">reductions.h</a></div></div>
<div class="ttc" id="structv__array_html_a1e8f3cf7ad69b05b38c016b09d85010d"><div class="ttname"><a href="structv__array.html#a1e8f3cf7ad69b05b38c016b09d85010d">v_array::end</a></div><div class="ttdeci">T *&amp; end()</div><div class="ttdef"><b>Definition:</b> <a href="v__array_8h_source.html#l00041">v_array.h:41</a></div></div>
<div class="ttc" id="lda__core_8cc_html_af06105ab6103c75445b03e6aa2060dec"><div class="ttname"><a href="lda__core_8cc.html#af06105ab6103c75445b03e6aa2060dec">save_load</a></div><div class="ttdeci">void save_load(lda &amp;l, io_buf &amp;model_file, bool read, bool text)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00786">lda_core.cc:786</a></div></div>
<div class="ttc" id="structlda_html_a8be33866789db85fb0da45a64a30433e"><div class="ttname"><a href="structlda.html#a8be33866789db85fb0da45a64a30433e">lda::digammas</a></div><div class="ttdeci">v_array&lt; float &gt; digammas</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00069">lda_core.cc:69</a></div></div>
<div class="ttc" id="classset__initial__lda__wrapper_html"><div class="ttname"><a href="classset__initial__lda__wrapper.html">set_initial_lda_wrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00770">lda_core.cc:770</a></div></div>
<div class="ttc" id="structvw_html_ad1f9eb87601ea231196182e3fce1a2a7"><div class="ttname"><a href="structvw.html#ad1f9eb87601ea231196182e3fce1a2a7">vw::numpasses</a></div><div class="ttdeci">size_t numpasses</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00443">global_data.h:443</a></div></div>
<div class="ttc" id="structshared__data_html_ad3b0fc9176c689eb63bf255499223c62"><div class="ttname"><a href="structshared__data.html#ad3b0fc9176c689eb63bf255499223c62">shared_data::update</a></div><div class="ttdeci">void update(bool test_example, bool labeled_example, float loss, float weight, size_t num_features)</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00172">global_data.h:172</a></div></div>
<div class="ttc" id="structexample_html_aec82f8fecc8ad2a13e54ecf83dfbc5c9"><div class="ttname"><a href="structexample.html#aec82f8fecc8ad2a13e54ecf83dfbc5c9">example::loss</a></div><div class="ttdeci">float loss</div><div class="ttdef"><b>Definition:</b> <a href="example_8h_source.html#l00071">example.h:71</a></div></div>
<div class="ttc" id="structvw_html_a939cbdaf20c78bfeabfddbf57c9d8250"><div class="ttname"><a href="structvw.html#a939cbdaf20c78bfeabfddbf57c9d8250">vw::eta</a></div><div class="ttdeci">float eta</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00529">global_data.h:529</a></div></div>
<div class="ttc" id="classindex__feature_html"><div class="ttname"><a href="classindex__feature.html">index_feature</a></div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00045">lda_core.cc:45</a></div></div>
<div class="ttc" id="namespaceldamath_html_ae6499831521aca90f0dc879c84257d91"><div class="ttname"><a href="namespaceldamath.html#ae6499831521aca90f0dc879c84257d91">ldamath::digamma</a></div><div class="ttdeci">T digamma(T)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00407">lda_core.cc:407</a></div></div>
<div class="ttc" id="array__parameters__dense_8h_html_a4d04a2043fa7480d905108e63adb0bab"><div class="ttname"><a href="array__parameters__dense_8h.html#a4d04a2043fa7480d905108e63adb0bab">weight</a></div><div class="ttdeci">float weight</div><div class="ttdef"><b>Definition:</b> <a href="array__parameters__dense_8h_source.html#l00010">array_parameters_dense.h:10</a></div></div>
<div class="ttc" id="kernel__svm_8cc_html_a907b9ad55bf6f8e61a6385bc9599fc0f"><div class="ttname"><a href="kernel__svm_8cc.html#a907b9ad55bf6f8e61a6385bc9599fc0f">add</a></div><div class="ttdeci">int add(svm_params &amp;params, svm_example *fec)</div><div class="ttdef"><b>Definition:</b> <a href="kernel__svm_8cc_source.html#l00540">kernel_svm.cc:540</a></div></div>
<div class="ttc" id="classfeatures__value__index__iterator_html"><div class="ttname"><a href="classfeatures__value__index__iterator.html">features_value_index_iterator</a></div><div class="ttdoc">iterator over values and indicies </div><div class="ttdef"><b>Definition:</b> <a href="feature__group_8h_source.html#l00113">feature_group.h:113</a></div></div>
<div class="ttc" id="structinitial__weights_html"><div class="ttname"><a href="structinitial__weights.html">initial_weights</a></div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00756">lda_core.cc:756</a></div></div>
<div class="ttc" id="structfeature_html"><div class="ttname"><a href="structfeature.html">feature</a></div><div class="ttdef"><b>Definition:</b> <a href="feature__group_8h_source.html#l00026">feature_group.h:26</a></div></div>
<div class="ttc" id="namespaceVW_1_1config_html"><div class="ttname"><a href="namespaceVW_1_1config.html">VW::config</a></div><div class="ttdef"><b>Definition:</b> <a href="options_8h_source.html#l00017">options.h:17</a></div></div>
<div class="ttc" id="structlda_html_a01778886ae22ac1468ffd88942981c4b"><div class="ttname"><a href="structlda.html#a01778886ae22ac1468ffd88942981c4b">lda::total_new</a></div><div class="ttdeci">v_array&lt; float &gt; total_new</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00065">lda_core.cc:65</a></div></div>
<div class="ttc" id="structlda_html_a3c385f5abf5c557a2da6006282f2f263"><div class="ttname"><a href="structlda.html#a3c385f5abf5c557a2da6006282f2f263">lda::topics</a></div><div class="ttdeci">size_t topics</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00055">lda_core.cc:55</a></div></div>
<div class="ttc" id="rand48_8cc_html_a591b56c87cb459191199d0ed6e4f5b9b"><div class="ttname"><a href="rand48_8cc.html#a591b56c87cb459191199d0ed6e4f5b9b">a</a></div><div class="ttdeci">constexpr uint64_t a</div><div class="ttdef"><b>Definition:</b> <a href="rand48_8cc_source.html#l00015">rand48.cc:15</a></div></div>
<div class="ttc" id="structvw_html_ac89895b3c3071cc384cda7902e2c0710"><div class="ttname"><a href="structvw.html#ac89895b3c3071cc384cda7902e2c0710">vw::passes_complete</a></div><div class="ttdeci">size_t passes_complete</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00444">global_data.h:444</a></div></div>
<div class="ttc" id="structv__array_html_aaad3f3fbd9694eb40a85d9dd3e4959ce"><div class="ttname"><a href="structv__array.html#aaad3f3fbd9694eb40a85d9dd3e4959ce">v_array::last</a></div><div class="ttdeci">T last() const </div><div class="ttdef"><b>Definition:</b> <a href="v__array_8h_source.html#l00055">v_array.h:55</a></div></div>
<div class="ttc" id="namespaceVW_1_1config_html_ae768389a49d24d07215612b2f824d520"><div class="ttname"><a href="namespaceVW_1_1config.html#ae768389a49d24d07215612b2f824d520">VW::config::make_option</a></div><div class="ttdeci">typed_option&lt; T &gt; make_option(std::string name, T &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="options_8h_source.html#l00095">options.h:95</a></div></div>
<div class="ttc" id="lda__core_8cc_html_ac2c33fd916d2249157be3879be665087"><div class="ttname"><a href="lda__core_8cc.html#ac2c33fd916d2249157be3879be665087">get_top_weights</a></div><div class="ttdeci">void get_top_weights(vw *all, int top_words_count, int topic, std::vector&lt; feature &gt; &amp;output, T &amp;weights)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01056">lda_core.cc:1056</a></div></div>
<div class="ttc" id="crossplat__compat_8h_html_a409526622742cba7837fe43789181429"><div class="ttname"><a href="crossplat__compat_8h.html#a409526622742cba7837fe43789181429">UINT64_ONE</a></div><div class="ttdeci">constexpr uint64_t UINT64_ONE</div><div class="ttdef"><b>Definition:</b> <a href="crossplat__compat_8h_source.html#l00013">crossplat_compat.h:13</a></div></div>
<div class="ttc" id="structLEARNER_1_1learner_html_a5267864868d93658202276d6ecce0d8b"><div class="ttname"><a href="structLEARNER_1_1learner.html#a5267864868d93658202276d6ecce0d8b">LEARNER::learner::set_end_pass</a></div><div class="ttdeci">void set_end_pass(void(*f)(T &amp;))</div><div class="ttdef"><b>Definition:</b> <a href="learner_8h_source.html#l00282">learner.h:282</a></div></div>
<div class="ttc" id="structv__array_html_a903166906624e9e31efe5d1df9bcb092"><div class="ttname"><a href="structv__array.html#a903166906624e9e31efe5d1df9bcb092">v_array::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="v__array_8h_source.html#l00066">v_array.h:66</a></div></div>
<div class="ttc" id="structlda_html_a117249eef1239a1d96a1708f7466d1c5"><div class="ttname"><a href="structlda.html#a117249eef1239a1d96a1708f7466d1c5">lda::expdigammify</a></div><div class="ttdeci">void expdigammify(vw &amp;all, float *gamma)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00594">lda_core.cc:594</a></div></div>
<div class="ttc" id="classparameters_html_a276f4673850e9650c1360a78c9afab97"><div class="ttname"><a href="classparameters.html#a276f4673850e9650c1360a78c9afab97">parameters::sparse_weights</a></div><div class="ttdeci">sparse_parameters sparse_weights</div><div class="ttdef"><b>Definition:</b> <a href="array__parameters_8h_source.html#l00237">array_parameters.h:237</a></div></div>
<div class="ttc" id="structlda_html_a52ba84529de54dd14174cbbd8dfa9d19"><div class="ttname"><a href="structlda.html#a52ba84529de54dd14174cbbd8dfa9d19">lda::digamma</a></div><div class="ttdeci">float digamma(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00533">lda_core.cc:533</a></div></div>
<div class="ttc" id="structfeature__pair_html_a35bd544448b65e7d211b87b414c6b28c"><div class="ttname"><a href="structfeature__pair.html#a35bd544448b65e7d211b87b414c6b28c">feature_pair::f1</a></div><div class="ttdeci">uint64_t f1</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01048">lda_core.cc:1048</a></div></div>
<div class="ttc" id="lda__core_8cc_html_a6b700dbc7f1f4305b026d8ccd8b8eb52"><div class="ttname"><a href="lda__core_8cc.html#a6b700dbc7f1f4305b026d8ccd8b8eb52">operator&gt;&gt;</a></div><div class="ttdeci">std::istream &amp; operator&gt;&gt;(std::istream &amp;in, lda_math_mode &amp;mmode)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01275">lda_core.cc:1275</a></div></div>
<div class="ttc" id="structinitial__weights_html_aee78b3abdf9950616b6531949c80fd19"><div class="ttname"><a href="structinitial__weights.html#aee78b3abdf9950616b6531949c80fd19">initial_weights::_initial_random</a></div><div class="ttdeci">weight _initial_random</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00759">lda_core.cc:759</a></div></div>
<div class="ttc" id="namespaceldamath_html_a5fcbcdf394a2705c2c39d514f4b695d7"><div class="ttname"><a href="namespaceldamath.html#a5fcbcdf394a2705c2c39d514f4b695d7">ldamath::fastlog</a></div><div class="ttdeci">float fastlog(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00138">lda_core.cc:138</a></div></div>
<div class="ttc" id="vw_8h_html"><div class="ttname"><a href="vw_8h.html">vw.h</a></div></div>
<div class="ttc" id="lda__core_8cc_html_a5b7522d16f2bcdb508ecc2549e5b7c45"><div class="ttname"><a href="lda__core_8cc.html#a5b7522d16f2bcdb508ecc2549e5b7c45">predict</a></div><div class="ttdeci">void predict(lda &amp;l, LEARNER::single_learner &amp;base, example &amp;ec)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01033">lda_core.cc:1033</a></div></div>
<div class="ttc" id="lda__core_8cc_html_aa309e2b6f0c3a0e8785ba9b7d5495297"><div class="ttname"><a href="lda__core_8cc.html#aa309e2b6f0c3a0e8785ba9b7d5495297">average_diff</a></div><div class="ttdeci">static float average_diff(vw &amp;all, float *oldgamma, float *newgamma)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00632">lda_core.cc:632</a></div></div>
<div class="ttc" id="classparameters_html_acfa565410aa0c9776d6c05552430fd7c"><div class="ttname"><a href="classparameters.html#acfa565410aa0c9776d6c05552430fd7c">parameters::stride_shift</a></div><div class="ttdeci">uint32_t stride_shift()</div><div class="ttdef"><b>Definition:</b> <a href="array__parameters_8h_source.html#l00247">array_parameters.h:247</a></div></div>
<div class="ttc" id="namespaceACTION__SCORE_html_a1ce55403f581514bdd318e5ef3bfdce8"><div class="ttname"><a href="namespaceACTION__SCORE.html#a1ce55403f581514bdd318e5ef3bfdce8">ACTION_SCORE::cmp</a></div><div class="ttdeci">int cmp(size_t a, size_t b)</div><div class="ttdef"><b>Definition:</b> <a href="action__score_8h_source.html#l00055">action_score.h:55</a></div></div>
<div class="ttc" id="structlda_html_a544e43df89959594ca610605c89f4561"><div class="ttname"><a href="structlda.html#a544e43df89959594ca610605c89f4561">lda::sorted_features</a></div><div class="ttdeci">std::vector&lt; index_feature &gt; sorted_features</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00071">lda_core.cc:71</a></div></div>
<div class="ttc" id="nn_8cc_html_aa2fc1eddf336e7821a5931054c23567c"><div class="ttname"><a href="nn_8cc.html#aa2fc1eddf336e7821a5931054c23567c">fastpow2</a></div><div class="ttdeci">static float fastpow2(float p)</div><div class="ttdef"><b>Definition:</b> <a href="nn_8cc_source.html#l00080">nn.cc:80</a></div></div>
<div class="ttc" id="namespaceanonymous__namespace_02lda__core_8cc_03_html_ae842b3fb620232fcae837ff12750df2f"><div class="ttname"><a href="namespaceanonymous__namespace_02lda__core_8cc_03.html#ae842b3fb620232fcae837ff12750df2f">anonymous_namespace{lda_core.cc}::old_gamma</a></div><div class="ttdeci">v_array&lt; float &gt; old_gamma</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00681">lda_core.cc:681</a></div></div>
<div class="ttc" id="namespaceLEARNER_html_a6a3dd62d10a87e9124f8ae65a2a7265a"><div class="ttname"><a href="namespaceLEARNER.html#a6a3dd62d10a87e9124f8ae65a2a7265a">LEARNER::init_learner</a></div><div class="ttdeci">learner&lt; T, E &gt; &amp; init_learner(free_ptr&lt; T &gt; &amp;dat, L *base, void(*learn)(T &amp;, L &amp;, E &amp;), void(*predict)(T &amp;, L &amp;, E &amp;), size_t ws, prediction_type_t pred_type)</div><div class="ttdef"><b>Definition:</b> <a href="learner_8h_source.html#l00365">learner.h:365</a></div></div>
<div class="ttc" id="structparser_html"><div class="ttname"><a href="structparser.html">parser</a></div><div class="ttdef"><b>Definition:</b> <a href="parser_8h_source.html#l00038">parser.h:38</a></div></div>
<div class="ttc" id="lda__core_8cc_html_abe28009ec8aedc966879e195d6b73b26"><div class="ttname"><a href="lda__core_8cc.html#abe28009ec8aedc966879e195d6b73b26">find_cw</a></div><div class="ttdeci">static float find_cw(lda &amp;l, float *u_for_w, float *v)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00672">lda_core.cc:672</a></div></div>
<div class="ttc" id="structvw_html_a6429c2918e06d399a27ccaf4000e4e33"><div class="ttname"><a href="structvw.html#a6429c2918e06d399a27ccaf4000e4e33">vw::audit</a></div><div class="ttdeci">bool audit</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00481">global_data.h:481</a></div></div>
<div class="ttc" id="classindex__feature_html_a8999c4919629820e83af036e724cb519"><div class="ttname"><a href="classindex__feature.html#a8999c4919629820e83af036e724cb519">index_feature::document</a></div><div class="ttdeci">uint32_t document</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00048">lda_core.cc:48</a></div></div>
<div class="ttc" id="structexample_html_ad1477e890371ed8253f1953d4190ba49"><div class="ttname"><a href="structexample.html#ad1477e890371ed8253f1953d4190ba49">example::pred</a></div><div class="ttdeci">polyprediction pred</div><div class="ttdef"><b>Definition:</b> <a href="example_8h_source.html#l00061">example.h:61</a></div></div>
<div class="ttc" id="structv__array_html_a81c7c9af1948bd97850eb06785f2254f"><div class="ttname"><a href="structv__array.html#a81c7c9af1948bd97850eb06785f2254f">v_array::delete_v</a></div><div class="ttdeci">void delete_v()</div><div class="ttdef"><b>Definition:</b> <a href="v__array_8h_source.html#l00096">v_array.h:96</a></div></div>
<div class="ttc" id="lda__core_8cc_html_a4eaaf4274b7f8ec8e4f91ce541b1f83a"><div class="ttname"><a href="lda__core_8cc.html#a4eaaf4274b7f8ec8e4f91ce541b1f83a">end_examples</a></div><div class="ttdeci">void end_examples(lda &amp;l, T &amp;weights)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01252">lda_core.cc:1252</a></div></div>
<div class="ttc" id="structinitial__weights_html_a046d45914ddfcc80fb6ba7a883451a37"><div class="ttname"><a href="structinitial__weights.html#a046d45914ddfcc80fb6ba7a883451a37">initial_weights::_lda</a></div><div class="ttdeci">uint32_t _lda</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00761">lda_core.cc:761</a></div></div>
<div class="ttc" id="classindex__feature_html_ae794cb76a8e0a2867b76032307ecfec6"><div class="ttname"><a href="classindex__feature.html#ae794cb76a8e0a2867b76032307ecfec6">index_feature::f</a></div><div class="ttdeci">feature f</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00049">lda_core.cc:49</a></div></div>
<div class="ttc" id="structlda_html_a88860d8883cc504428feca3c9e86dc2d"><div class="ttname"><a href="structlda.html#a88860d8883cc504428feca3c9e86dc2d">lda::total_lambda_init</a></div><div class="ttdeci">bool total_lambda_init</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00079">lda_core.cc:79</a></div></div>
<div class="ttc" id="lda__core_8cc_html_a4b6039f4ea578f0cc8a148946d6526c1"><div class="ttname"><a href="lda__core_8cc.html#a4b6039f4ea578f0cc8a148946d6526c1">end_pass</a></div><div class="ttdeci">void end_pass(lda &amp;l)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01239">lda_core.cc:1239</a></div></div>
<div class="ttc" id="structexample_html_a403be75fc4fdd058e4f7c1baf39be11a"><div class="ttname"><a href="structexample.html#a403be75fc4fdd058e4f7c1baf39be11a">example::weight</a></div><div class="ttdeci">float weight</div><div class="ttdef"><b>Definition:</b> <a href="example_8h_source.html#l00063">example.h:63</a></div></div>
<div class="ttc" id="structv__array_html"><div class="ttname"><a href="structv__array.html">v_array&lt; float &gt;</a></div></div>
<div class="ttc" id="structshared__data_html_a2997e24e8f7088cf4c1f782038238ae6"><div class="ttname"><a href="structshared__data.html#a2997e24e8f7088cf4c1f782038238ae6">shared_data::weighted_examples</a></div><div class="ttdeci">double weighted_examples()</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00170">global_data.h:170</a></div></div>
<div class="ttc" id="structshared__data_html_acc14d5e78772dd39829a82e4df2912d7"><div class="ttname"><a href="structshared__data.html#acc14d5e78772dd39829a82e4df2912d7">shared_data::dump_interval</a></div><div class="ttdeci">float dump_interval</div><div class="ttdef"><b>Definition:</b> <a href="global__data_8h_source.html#l00129">global_data.h:129</a></div></div>
<div class="ttc" id="structv__array_html_a01916436cabbd621bf40731f78360550"><div class="ttname"><a href="structv__array.html#a01916436cabbd621bf40731f78360550">v_array::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="v__array_8h_source.html#l00057">v_array.h:57</a></div></div>
<div class="ttc" id="unionpolyprediction_html_acd55cc5dd67b6cb5a527bf2bdc66bf15"><div class="ttname"><a href="unionpolyprediction.html#acd55cc5dd67b6cb5a527bf2bdc66bf15">polyprediction::scalars</a></div><div class="ttdeci">v_array&lt; float &gt; scalars</div><div class="ttdef"><b>Definition:</b> <a href="example_8h_source.html#l00046">example.h:46</a></div></div>
<div class="ttc" id="io__buf_8h_html_a317681947f2ac8ceda45d4b16e852225"><div class="ttname"><a href="io__buf_8h.html#a317681947f2ac8ceda45d4b16e852225">bin_text_read_write_fixed</a></div><div class="ttdeci">size_t bin_text_read_write_fixed(io_buf &amp;io, char *data, size_t len, const char *read_message, bool read, std::stringstream &amp;msg, bool text)</div><div class="ttdef"><b>Definition:</b> <a href="io__buf_8h_source.html#l00324">io_buf.h:324</a></div></div>
<div class="ttc" id="classparameters_html_a417b307b1980e9744d7f2b94acd3a4b2"><div class="ttname"><a href="classparameters.html#a417b307b1980e9744d7f2b94acd3a4b2">parameters::mask</a></div><div class="ttdeci">uint64_t mask()</div><div class="ttdef"><b>Definition:</b> <a href="array__parameters_8h_source.html#l00263">array_parameters.h:263</a></div></div>
<div class="ttc" id="namespaceldamath_html_a767f43cff6774529df5a0c85056c682f"><div class="ttname"><a href="namespaceldamath.html#a767f43cff6774529df5a0c85056c682f">ldamath::digamma&lt; float, USE_FAST_APPROX &gt;</a></div><div class="ttdeci">float digamma&lt; float, USE_FAST_APPROX &gt;(float x)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00457">lda_core.cc:457</a></div></div>
<div class="ttc" id="classparameters_html_a83947face4285f451b42f9283ea127e8"><div class="ttname"><a href="classparameters.html#a83947face4285f451b42f9283ea127e8">parameters::sparse</a></div><div class="ttdeci">bool sparse</div><div class="ttdef"><b>Definition:</b> <a href="array__parameters_8h_source.html#l00235">array_parameters.h:235</a></div></div>
<div class="ttc" id="cache_8cc_html_af900396d7b72ff2a7002e8befe8cf8f1"><div class="ttname"><a href="cache_8cc.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a></div><div class="ttdeci">float f</div><div class="ttdef"><b>Definition:</b> <a href="cache_8cc_source.html#l00039">cache.cc:39</a></div></div>
<div class="ttc" id="structLEARNER_1_1learner_html_a30db946158a6fb5d8a8fb1b0da6d6756"><div class="ttname"><a href="structLEARNER_1_1learner.html#a30db946158a6fb5d8a8fb1b0da6d6756">LEARNER::learner::set_end_examples</a></div><div class="ttdeci">void set_end_examples(void(*f)(T &amp;))</div><div class="ttdef"><b>Definition:</b> <a href="learner_8h_source.html#l00291">learner.h:291</a></div></div>
<div class="ttc" id="structparser_html_af15b434af656966700c94a50a92c4fcd"><div class="ttname"><a href="structparser.html#af15b434af656966700c94a50a92c4fcd">parser::lp</a></div><div class="ttdeci">label_parser lp</div><div class="ttdef"><b>Definition:</b> <a href="parser_8h_source.html#l00113">parser.h:113</a></div></div>
<div class="ttc" id="structlda_html_ae912b131d324029d50cfdb4d1a7b9956"><div class="ttname"><a href="structlda.html#ae912b131d324029d50cfdb4d1a7b9956">lda::v</a></div><div class="ttdeci">v_array&lt; float &gt; v</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00070">lda_core.cc:70</a></div></div>
<div class="ttc" id="structlda_html"><div class="ttname"><a href="structlda.html">lda</a></div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00053">lda_core.cc:53</a></div></div>
<div class="ttc" id="structfeature__pair_html"><div class="ttname"><a href="structfeature__pair.html">feature_pair</a></div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01045">lda_core.cc:1045</a></div></div>
<div class="ttc" id="structfeature__pair_html_adb6aef90a639f0a7a4f9ffd2d8d67b5c"><div class="ttname"><a href="structfeature__pair.html#adb6aef90a639f0a7a4f9ffd2d8d67b5c">feature_pair::feature_pair</a></div><div class="ttdeci">feature_pair(uint64_t _f1, uint64_t _f2)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l01052">lda_core.cc:1052</a></div></div>
<div class="ttc" id="namespaceldamath_html_ae78e93f0fddc20ccf041cde4135c6797"><div class="ttname"><a href="namespaceldamath.html#ae78e93f0fddc20ccf041cde4135c6797">ldamath::lgamma</a></div><div class="ttdeci">T lgamma(T)</div><div class="ttdef"><b>Definition:</b> <a href="lda__core_8cc_source.html#l00400">lda_core.cc:400</a></div></div>
<div class="ttc" id="namespaceno__label_html_a39c874dbb1f3c89a76e050fc608e28b6"><div class="ttname"><a href="namespaceno__label.html#a39c874dbb1f3c89a76e050fc608e28b6">no_label::no_label_parser</a></div><div class="ttdeci">label_parser no_label_parser</div><div class="ttdef"><b>Definition:</b> <a href="no__label_8cc_source.html#l00046">no_label.cc:46</a></div></div>
<div class="ttc" id="structexample_html_aafed65a0405faa864c87b8b75d39ef4d"><div class="ttname"><a href="structexample.html#aafed65a0405faa864c87b8b75d39ef4d">example::test_only</a></div><div class="ttdeci">bool test_only</div><div class="ttdef"><b>Definition:</b> <a href="example_8h_source.html#l00077">example.h:77</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Mar 21 2020 19:55:35 for Vowpal Wabbit by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
